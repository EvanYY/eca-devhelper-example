import { QueryResponse, RuleDefination } from "./interfaces";

export const dsMock2 = (): QueryResponse[] => [
  {
    batchId: "62e7ab42",
    fields: [
      { field: "customer", detail: {} },
      { field: "contact", detail: {} },
      { field: "salesOrg", detail: {} },
      { field: "revenueConfirmationItems.product", detail: {} },
      { field: "revenueConfirmationItems.project", detail: {} },
      { field: "revenueConfirmationItems.projectStage", detail: {} },
      { field: "revenueConfirmationItems.projectOrg", detail: {} },
      { field: "project", detail: {} },
      { field: "projectStage", detail: {} },
      { field: "projectOrg", detail: {} },
      { field: "ownerUser", detail: {} },
      { field: "department", detail: {} },
      { field: "settleCustomer", detail: {} },
      { field: "contract", detail: {} },
      { field: "settlePartyBankAccount", detail: {} },
      { field: "createdOrg", detail: {} },
      { field: "revenueConfirmationItems.revenue", detail: {} },
      { field: "revenueConfirmationItems.product.code", detail: {} },
      { field: "revenueConfirmationItems.product.spec", detail: {} },
      { field: "revenueConfirmationItems.product.unit", detail: {} },
      { field: "revenueConfirmationItems.contract", detail: {} },
      { field: "revenueConfirmationItems.contract.name", detail: {} },
      { field: "revenueConfirmationItems.contract.billType", detail: {} },
      {
        field: "revenueConfirmationItems.contractSubjectMatterItem",
        detail: {},
      },
      {
        field: "revenueConfirmationItems.contractSubjectMatterItem.rowNo",
        detail: {},
      },
    ],
    rules: [
      {
        dependent: "customer",
        target: "contact",
        weight: 2,
        effect: [
          {
            variables: {
              "$current.customer": {
                id: "TKBUFW52DBM001U",
                name: "客户3",
                settleCustomer: {
                  id: "7ARMDW52DCV002D",
                  name: "客户01",
                  address: "",
                  invoiceType: {
                    id: "HHN0HK501610001",
                    aliasName: "增值税专用发票",
                    _ctrlViewFields: {},
                    _ctrlViewMethod: "unavaliable",
                  },
                  settleCustomer: { id: "7ARMDW52DCV002D", name: "客户01" },
                  telephone: "",
                  code: "0010000001",
                  taxIdNumber: "",
                  _ctrlViewFields: {},
                  _ctrlViewMethod: "unavaliable",
                },
                ownerDept: { id: "VKQMDW52DCV000A", name: "测试三部" },
                ownerUser: { id: "RKQMDW52DCV002S", name: "王小二" },
                taxIdNumber: "",
                address: "",
                telephone: "",
                _ctrlViewFields: {},
                _ctrlViewMethod: "unavaliable",
              },
            },
            ruleId: "Old-StatusChange-600fe25d-3eb7-4a71-a08c-4fced427289c",
            actionIndex: 0,
            result: { type: "Readonly", oldValue: true, newValue: false },
            time: 1637229177727,
            sequence: 1298,
            actionName: "ReactiveFieldStatus",
          },
          {
            variables: { "$current.customer.id": "TKBUFW52DBM001U" },
            ruleId: "Old-Criteria-ed2c93b3-7314-4d56-bce0-b5c1f64158c9",
            actionIndex: 0,
            result: {
              type: "criteria",
              newValue: {
                criteriaStr: "objectId=:customer",
                bindVars: [{ name: "customer", value: "TKBUFW52DBM001U" }],
                type: "and",
              },
            },
            time: 1637229177711,
            sequence: 1240,
            actionName: "ReactiveCriteria",
          },
        ],
      },
      {
        dependent: "salesOrg",
        target: "revenueConfirmationItems.product",
        weight: 1,
        effect: [
          {
            variables: {
              "$root.createdOrg.id": "1U2VDW52DUM002M",
              "$root.salesOrg.id": "1U2VDW52DUM002M",
            },
            ruleId: "QueryContext-d39adc47-2111-410e-994c-692727f674ab",
            actionIndex: 1,
            result: {
              type: "fieldComponentProps",
              oldValue: {
                contextOrgIds: ["1U2VDW52DUM002M"],
                contextRoleOrgIds: { FinancialOrg: "1U2VDW52DUM002M" },
              },
              newValue: { contextRoleOrgIds: { SalesOrg: "1U2VDW52DUM002M" } },
            },
            time: 1637229178523,
            sequence: 1613,
            actionName: "ReactiveFieldComponentProps",
          },
        ],
      },
      {
        dependent: "revenueConfirmationItems.project",
        target: "revenueConfirmationItems.projectStage",
        weight: 4,
        effect: [
          {
            variables: {},
            ruleId: "9993a8e2-46f5-437a-96c9-a7faab36ce90",
            actionIndex: 0,
            result: { type: "Readonly", oldValue: true, newValue: true },
            time: 1637229178436,
            sequence: 1411,
            actionName: "ReactiveFieldStatus",
          },
          {
            variables: { "$current.project.id": "4EFUFW52DBM001L" },
            ruleId: "f03c2356-709c-48f3-800a-90c8f3e5599e",
            actionIndex: 0,
            result: {
              type: "criteria",
              newValue: {
                criteriaStr: "projectId = :projectId",
                bindVars: [{ name: "projectId", value: "4EFUFW52DBM001L" }],
                type: "and",
              },
            },
            time: 1637229177568,
            sequence: 1063,
            actionName: "ReactiveCriteria",
          },
        ],
      },
      {
        dependent: "revenueConfirmationItems.project",
        target: "revenueConfirmationItems.projectOrg",
        weight: 7,
        effect: [
          {
            variables: {
              "$current.project": {
                id: "4EFUFW52DBM001L",
                name: "项目5",
                code: "001000000003",
                aidCode: "XM5",
                customer: {
                  id: "TKBUFW52DBM001U",
                  name: "客户3",
                  settleCustomer: {
                    id: "7ARMDW52DCV002D",
                    name: "客户01",
                    address: "",
                    invoiceType: {
                      id: "HHN0HK501610001",
                      aliasName: "增值税专用发票",
                      _ctrlViewFields: {},
                      _ctrlViewMethod: "unavaliable",
                    },
                    settleCustomer: { id: "7ARMDW52DCV002D", name: "客户01" },
                    telephone: "",
                    code: "0010000001",
                    taxIdNumber: "",
                    _ctrlViewFields: {},
                    _ctrlViewMethod: "unavaliable",
                  },
                  ownerDept: { id: "VKQMDW52DCV000A", name: "测试三部" },
                  ownerUser: { id: "RKQMDW52DCV002S", name: "王小二" },
                  taxIdNumber: "",
                  address: "",
                  telephone: "",
                  _ctrlViewFields: {},
                  _ctrlViewMethod: "unavaliable",
                },
                category: {
                  id: "6NMMDW52DCV0008",
                  name: "项目分类1",
                  code: "001",
                  idPath: "6NMMDW52DCV0008,",
                  _ctrlViewFields: {},
                  _ctrlViewMethod: "unavaliable",
                },
                financialOrg: { id: "LD61DW52DBB001Q", name: "成都企企" },
                createdOrg: {
                  id: "LD61DW52DBB001Q",
                  name: "成都企企",
                  isFinancialOrg: true,
                  isSalesOrg: true,
                  isProjectOrg: true,
                  isInventoryOrg: true,
                  isLegalEntity: true,
                  isPurchaseOrg: true,
                  _ctrlViewFields: {},
                  _ctrlViewMethod: "unavaliable",
                },
                stages: [
                  {
                    id: "T5GUFW52DBM0001",
                    stage: { id: "RDCWDW52DUM001W", name: "阶段1" },
                  },
                  {
                    id: "T5GUFW52DBM0002",
                    stage: { id: "RDCWDW52DUM002R", name: "阶段4" },
                  },
                ],
                projectOrg: { id: "LD61DW52DBB001Q", name: "成都企企" },
                usedProjectOrgIds: [
                  "K4WUXS50JUD0011",
                  "KR51DW52DBB002F",
                  "LD61DW52DBB001Q",
                  "LHPXDW52DUM000A",
                  "DSN8EW52DMX001G",
                  "7M6WEW52DQJ000R",
                ],
                billType: { id: "QT3GHL501QD0001", name: "项目" },
                idPath: "4EFUFW52DBM001L,",
                parents: [],
                deliverOrgs: [
                  { id: "T5GUFW52DBM0005", code: "" },
                  { id: "T5GUFW52DBM0006", code: "" },
                  { id: "T5GUFW52DBM0007", code: "" },
                ],
                ownerDept: { id: "VKQMDW52DCV0009", name: "测试二部" },
                ownerUser: { id: "RKQMDW52DCV0031", name: "左江令" },
                planStartDate: 1635609600000,
                planEndDate: 1638547200000,
                _ctrlViewMethod: "unavaliable",
                _ctrlViewFields: {},
                _ctrlEditMethod: "avaliable",
                _ctrlEditFields: {},
              },
              "$root.createdOrg": {
                code: "001007",
                id: "1U2VDW52DUM002M",
                isCustomer: false,
                isEnabled: true,
                isFinancialOrg: true,
                isInventoryOrg: false,
                isLegalEntity: false,
                isOtherParty: false,
                isProjectOrg: false,
                isPurchaseOrg: true,
                isSalesOrg: true,
                isVendor: false,
                isVirtual: false,
                name: "财务组织A（成都）",
                organizationRoles: [
                  {
                    id: "1U2VDW52DUM002L",
                    partyRoleType: { id: "FinancialOrg" },
                  },
                  {
                    id: "DSN8EW52DMX0031",
                    partyRoleType: { id: "PurchaseOrg" },
                  },
                  { id: "DSN8EW52DMX0032", partyRoleType: { id: "SalesOrg" } },
                ],
                ownerLegalEntityOrg: {
                  id: "LD61DW52DBB001Q",
                  name: "成都企企",
                },
                partyRoles: [
                  { id: "1U2VDW52DUM002L" },
                  { id: "DSN8EW52DMX0031" },
                  { id: "DSN8EW52DMX0032" },
                ],
                partyType: { id: "OperationUnit", name: "经营单元" },
              },
            },
            ruleId: "757b5191-7f89-44cf-b8bd-f528474efbfc",
            actionIndex: 0,
            result: { type: "value" },
            time: 1637229179775,
            sequence: 1727,
            actionName: "Assignment",
          },
          {
            variables: {},
            ruleId: "af0f185b-00bb-4f68-a554-8fd03723fb8d",
            actionIndex: 0,
            result: { type: "Readonly", oldValue: true, newValue: true },
            time: 1637229178453,
            sequence: 1428,
            actionName: "ReactiveFieldStatus",
          },
          {
            variables: { "$current.project.id": "4EFUFW52DBM001L" },
            ruleId: "Criteria-ContextRoleRelationShip-4",
            actionIndex: 0,
            result: {
              type: "criteria",
              newValue: {
                criteriaStr:
                  "(m.id=:salesOrgId or exists (select 1 from PartyDelegateRelationship where relationshipTypeId in ('SalesProjectDelegateRelationship')and toPartyId=m.id and fromPartyId=:salesOrgId  and isDisabled=false))",
                bindVars: [{ name: "salesOrgId", value: "1U2VDW52DUM002M" }],
                type: "and",
              },
            },
            time: 1637229177587,
            sequence: 1092,
            actionName: "ReactiveCriteria",
          },
          {
            variables: { "$current.project.id": "4EFUFW52DBM001L" },
            ruleId: "77344a39-f221-43ac-b4dd-837aab7bddfe",
            actionIndex: 0,
            result: {
              type: "criteria",
              newValue: {
                criteriaStr:
                  "m.id in (select jsonb_array_elements_text(usedProjectOrgIds) from Project where id=:pid)",
                bindVars: [{ name: "pid", value: "4EFUFW52DBM001L" }],
                type: "and",
              },
            },
            time: 1637229177582,
            sequence: 1083,
            actionName: "ReactiveCriteria",
          },
        ],
      },
      {
        dependent: "project",
        target: "projectStage",
        weight: 2,
        effect: [
          {
            variables: {
              "$current.project": {
                id: "4EFUFW52DBM001L",
                name: "项目5",
                code: "001000000003",
                aidCode: "XM5",
                customer: {
                  id: "TKBUFW52DBM001U",
                  name: "客户3",
                  settleCustomer: {
                    id: "7ARMDW52DCV002D",
                    name: "客户01",
                    address: "",
                    invoiceType: {
                      id: "HHN0HK501610001",
                      aliasName: "增值税专用发票",
                      _ctrlViewFields: {},
                      _ctrlViewMethod: "unavaliable",
                    },
                    settleCustomer: { id: "7ARMDW52DCV002D", name: "客户01" },
                    telephone: "",
                    code: "0010000001",
                    taxIdNumber: "",
                    _ctrlViewFields: {},
                    _ctrlViewMethod: "unavaliable",
                  },
                  ownerDept: { id: "VKQMDW52DCV000A", name: "测试三部" },
                  ownerUser: { id: "RKQMDW52DCV002S", name: "王小二" },
                  taxIdNumber: "",
                  address: "",
                  telephone: "",
                  _ctrlViewFields: {},
                  _ctrlViewMethod: "unavaliable",
                },
                category: {
                  id: "6NMMDW52DCV0008",
                  name: "项目分类1",
                  code: "001",
                  idPath: "6NMMDW52DCV0008,",
                  _ctrlViewFields: {},
                  _ctrlViewMethod: "unavaliable",
                },
                financialOrg: { id: "LD61DW52DBB001Q", name: "成都企企" },
                createdOrg: {
                  id: "LD61DW52DBB001Q",
                  name: "成都企企",
                  isFinancialOrg: true,
                  isSalesOrg: true,
                  isProjectOrg: true,
                  isInventoryOrg: true,
                  isLegalEntity: true,
                  isPurchaseOrg: true,
                  _ctrlViewFields: {},
                  _ctrlViewMethod: "unavaliable",
                },
                stages: [
                  {
                    id: "T5GUFW52DBM0001",
                    stage: { id: "RDCWDW52DUM001W", name: "阶段1" },
                  },
                  {
                    id: "T5GUFW52DBM0002",
                    stage: { id: "RDCWDW52DUM002R", name: "阶段4" },
                  },
                ],
                projectOrg: { id: "LD61DW52DBB001Q", name: "成都企企" },
                usedProjectOrgIds: [
                  "K4WUXS50JUD0011",
                  "KR51DW52DBB002F",
                  "LD61DW52DBB001Q",
                  "LHPXDW52DUM000A",
                  "DSN8EW52DMX001G",
                  "7M6WEW52DQJ000R",
                ],
                billType: { id: "QT3GHL501QD0001", name: "项目" },
                idPath: "4EFUFW52DBM001L,",
                parents: [],
                deliverOrgs: [
                  { id: "T5GUFW52DBM0005", code: "" },
                  { id: "T5GUFW52DBM0006", code: "" },
                  { id: "T5GUFW52DBM0007", code: "" },
                ],
                ownerDept: { id: "VKQMDW52DCV0009", name: "测试二部" },
                ownerUser: { id: "RKQMDW52DCV0031", name: "左江令" },
                planStartDate: 1635609600000,
                planEndDate: 1638547200000,
                _ctrlViewMethod: "unavaliable",
                _ctrlViewFields: {},
                _ctrlEditMethod: "avaliable",
                _ctrlEditFields: {},
              },
            },
            ruleId: "9993a8e2-46f5-437a-96c9-a7faab36ce90",
            actionIndex: 0,
            result: { type: "Readonly", oldValue: true },
            time: 1637229177597,
            sequence: 1114,
            actionName: "ReactiveFieldStatus",
          },
          {
            variables: { "$current.project.id": "4EFUFW52DBM001L" },
            ruleId: "f03c2356-709c-48f3-800a-90c8f3e5599e",
            actionIndex: 0,
            result: {
              type: "criteria",
              newValue: {
                criteriaStr: "projectId = :projectId",
                bindVars: [{ name: "projectId", value: "4EFUFW52DBM001L" }],
                type: "and",
              },
            },
            time: 1637229177594,
            sequence: 1104,
            actionName: "ReactiveCriteria",
          },
        ],
      },
      {
        dependent: "project",
        target: "projectOrg",
        weight: 3,
        effect: [
          {
            variables: {
              "$current.salesOrg.id": "1U2VDW52DUM002M",
              "$current.project.id": "4EFUFW52DBM001L",
            },
            ruleId: "Criteria-ContextRoleRelationShip-1",
            actionIndex: 0,
            result: {
              type: "criteria",
              newValue: {
                criteriaStr:
                  "(m.id=:salesOrgId or exists (select 1 from PartyDelegateRelationship where relationshipTypeId in ('SalesProjectDelegateRelationship')and toPartyId=m.id and fromPartyId=:salesOrgId  and isDisabled=false))",
                bindVars: [{ name: "salesOrgId", value: "1U2VDW52DUM002M" }],
                type: "and",
              },
            },
            time: 1637229177612,
            sequence: 1165,
            actionName: "ReactiveCriteria",
          },
          {
            variables: { "$current.project.id": "4EFUFW52DBM001L" },
            ruleId: "77344a39-f221-43ac-b4dd-837aab7bddfe",
            actionIndex: 0,
            result: {
              type: "criteria",
              newValue: {
                criteriaStr:
                  "m.id in (select jsonb_array_elements_text(usedProjectOrgIds) from Project where id=:pid)",
                bindVars: [{ name: "pid", value: "4EFUFW52DBM001L" }],
                type: "and",
              },
            },
            time: 1637229177604,
            sequence: 1136,
            actionName: "ReactiveCriteria",
          },
          {
            variables: {
              "$current.project": {
                id: "4EFUFW52DBM001L",
                name: "项目5",
                code: "001000000003",
                aidCode: "XM5",
                customer: {
                  id: "TKBUFW52DBM001U",
                  name: "客户3",
                  settleCustomer: {
                    id: "7ARMDW52DCV002D",
                    name: "客户01",
                    address: "",
                    invoiceType: {
                      id: "HHN0HK501610001",
                      aliasName: "增值税专用发票",
                      _ctrlViewFields: {},
                      _ctrlViewMethod: "unavaliable",
                    },
                    settleCustomer: { id: "7ARMDW52DCV002D", name: "客户01" },
                    telephone: "",
                    code: "0010000001",
                    taxIdNumber: "",
                    _ctrlViewFields: {},
                    _ctrlViewMethod: "unavaliable",
                  },
                  ownerDept: { id: "VKQMDW52DCV000A", name: "测试三部" },
                  ownerUser: { id: "RKQMDW52DCV002S", name: "王小二" },
                  taxIdNumber: "",
                  address: "",
                  telephone: "",
                  _ctrlViewFields: {},
                  _ctrlViewMethod: "unavaliable",
                },
                category: {
                  id: "6NMMDW52DCV0008",
                  name: "项目分类1",
                  code: "001",
                  idPath: "6NMMDW52DCV0008,",
                  _ctrlViewFields: {},
                  _ctrlViewMethod: "unavaliable",
                },
                financialOrg: { id: "LD61DW52DBB001Q", name: "成都企企" },
                createdOrg: {
                  id: "LD61DW52DBB001Q",
                  name: "成都企企",
                  isFinancialOrg: true,
                  isSalesOrg: true,
                  isProjectOrg: true,
                  isInventoryOrg: true,
                  isLegalEntity: true,
                  isPurchaseOrg: true,
                  _ctrlViewFields: {},
                  _ctrlViewMethod: "unavaliable",
                },
                stages: [
                  {
                    id: "T5GUFW52DBM0001",
                    stage: { id: "RDCWDW52DUM001W", name: "阶段1" },
                  },
                  {
                    id: "T5GUFW52DBM0002",
                    stage: { id: "RDCWDW52DUM002R", name: "阶段4" },
                  },
                ],
                projectOrg: { id: "LD61DW52DBB001Q", name: "成都企企" },
                usedProjectOrgIds: [
                  "K4WUXS50JUD0011",
                  "KR51DW52DBB002F",
                  "LD61DW52DBB001Q",
                  "LHPXDW52DUM000A",
                  "DSN8EW52DMX001G",
                  "7M6WEW52DQJ000R",
                ],
                billType: { id: "QT3GHL501QD0001", name: "项目" },
                idPath: "4EFUFW52DBM001L,",
                parents: [],
                deliverOrgs: [
                  { id: "T5GUFW52DBM0005", code: "" },
                  { id: "T5GUFW52DBM0006", code: "" },
                  { id: "T5GUFW52DBM0007", code: "" },
                ],
                ownerDept: { id: "VKQMDW52DCV0009", name: "测试二部" },
                ownerUser: { id: "RKQMDW52DCV0031", name: "左江令" },
                planStartDate: 1635609600000,
                planEndDate: 1638547200000,
                _ctrlViewMethod: "unavaliable",
                _ctrlViewFields: {},
                _ctrlEditMethod: "avaliable",
                _ctrlEditFields: {},
              },
            },
            ruleId: "af0f185b-00bb-4f68-a554-8fd03723fb8d",
            actionIndex: 0,
            result: { type: "Readonly", oldValue: true },
            time: 1637229177601,
            sequence: 1127,
            actionName: "ReactiveFieldStatus",
          },
        ],
      },
      {
        dependent: "salesOrg",
        target: "projectOrg",
        weight: 1,
        effect: [
          {
            variables: {
              "$current.salesOrg.id": "1U2VDW52DUM002M",
              "$current.project.id": "4EFUFW52DBM001L",
            },
            ruleId: "Criteria-ContextRoleRelationShip-1",
            actionIndex: 0,
            result: {
              type: "criteria",
              newValue: {
                criteriaStr:
                  "(m.id=:salesOrgId or exists (select 1 from PartyDelegateRelationship where relationshipTypeId in ('SalesProjectDelegateRelationship')and toPartyId=m.id and fromPartyId=:salesOrgId  and isDisabled=false))",
                bindVars: [{ name: "salesOrgId", value: "1U2VDW52DUM002M" }],
                type: "and",
              },
            },
            time: 1637229177612,
            sequence: 1165,
            actionName: "ReactiveCriteria",
          },
        ],
      },
      {
        dependent: "customer",
        target: "ownerUser",
        weight: 1,
        effect: [
          {
            variables: {
              "$root.customer.ownerUser": {
                id: "RKQMDW52DCV002S",
                name: "王小二",
              },
              "$variable.isSourcePicking": false,
            },
            ruleId: "9f0e77ab-8518-4d6f-9993-da57b72e2e8c",
            actionIndex: 0,
            result: {
              type: "value",
              newValue: { id: "RKQMDW52DCV002S", name: "王小二" },
            },
            time: 1637229177625,
            sequence: 1188,
            actionName: "ReactiveAssignment",
          },
        ],
      },
      {
        dependent: "customer",
        target: "department",
        weight: 1,
        effect: [
          {
            variables: {
              "$root.customer.ownerDept": {
                id: "VKQMDW52DCV000A",
                name: "测试三部",
              },
              "$variable.isSourcePicking": false,
            },
            ruleId: "9f0e77ab-8518-4d6f-9993-da57b72e2e8c",
            actionIndex: 0,
            result: {
              type: "value",
              newValue: { id: "VKQMDW52DCV000A", name: "测试三部" },
            },
            time: 1637229177631,
            sequence: 1207,
            actionName: "ReactiveAssignment",
          },
        ],
      },
      {
        dependent: "customer",
        target: "settleCustomer",
        weight: 1,
        effect: [
          {
            variables: {
              "$root.customer.settleCustomer": {
                id: "7ARMDW52DCV002D",
                name: "客户01",
                address: "",
                invoiceType: {
                  id: "HHN0HK501610001",
                  aliasName: "增值税专用发票",
                  _ctrlViewFields: {},
                  _ctrlViewMethod: "unavaliable",
                },
                settleCustomer: { id: "7ARMDW52DCV002D", name: "客户01" },
                telephone: "",
                code: "0010000001",
                taxIdNumber: "",
                _ctrlViewFields: {},
                _ctrlViewMethod: "unavaliable",
              },
              "$variable.isSourcePicking": false,
            },
            ruleId: "9f0e77ab-8518-4d6f-9993-da57b72e2e8c",
            actionIndex: 0,
            result: {
              type: "value",
              oldValue: {
                id: "7ARMDW52DCV002D",
                name: "客户01",
                address: "",
                invoiceType: {
                  id: "HHN0HK501610001",
                  aliasName: "增值税专用发票",
                  _ctrlViewFields: {},
                  _ctrlViewMethod: "unavaliable",
                },
                settleCustomer: { id: "7ARMDW52DCV002D", name: "客户01" },
                telephone: "",
                code: "0010000001",
                taxIdNumber: "",
                _ctrlViewFields: {},
                _ctrlViewMethod: "unavaliable",
              },
              newValue: {
                id: "7ARMDW52DCV002D",
                name: "客户01",
                address: "",
                invoiceType: {
                  id: "HHN0HK501610001",
                  aliasName: "增值税专用发票",
                  _ctrlViewFields: {},
                  _ctrlViewMethod: "unavaliable",
                },
                settleCustomer: { id: "7ARMDW52DCV002D", name: "客户01" },
                telephone: "",
                code: "0010000001",
                taxIdNumber: "",
                _ctrlViewFields: {},
                _ctrlViewMethod: "unavaliable",
              },
            },
            time: 1637229177638,
            sequence: 1226,
            actionName: "ReactiveAssignment",
          },
        ],
      },
      {
        dependent: "customer",
        target: "contract",
        weight: 4,
        effect: [
          {
            variables: { "$current.customer.id": "TKBUFW52DBM001U" },
            ruleId: "Old-Criteria-045c84e4-b72f-4847-86b5-0fa6c497e32a",
            actionIndex: 0,
            result: {
              type: "criteria",
              newValue: {
                criteriaStr: "customerId =: customer",
                bindVars: [{ name: "customer", value: "TKBUFW52DBM001U" }],
                type: "and",
              },
            },
            time: 1637229177723,
            sequence: 1285,
            actionName: "ReactiveCriteria",
          },
          {
            variables: { "$current.customer.id": "TKBUFW52DBM001U" },
            ruleId: "Old-Criteria-7b843979-f6a6-496e-8956-22c03cd8adde",
            actionIndex: 0,
            result: {
              type: "criteria",
              newValue: {
                criteriaStr: "customerId =: customer",
                bindVars: [{ name: "customer", value: "TKBUFW52DBM001U" }],
                type: "and",
              },
            },
            time: 1637229177720,
            sequence: 1273,
            actionName: "ReactiveCriteria",
          },
          {
            variables: { "$current.customer.id": "TKBUFW52DBM001U" },
            ruleId: "Old-Criteria-e873f4b2-8398-4474-a5b8-9b5da320299c",
            actionIndex: 0,
            result: {
              type: "criteria",
              newValue: {
                criteriaStr: "customerId =: customer",
                bindVars: [{ name: "customer", value: "TKBUFW52DBM001U" }],
                type: "and",
              },
            },
            time: 1637229177716,
            sequence: 1261,
            actionName: "ReactiveCriteria",
          },
          {
            variables: { "$current.customer.id": "TKBUFW52DBM001U" },
            ruleId: "Old-Criteria-7642e0ef-3042-4939-a28c-ad9545b79a65",
            actionIndex: 0,
            result: {
              type: "criteria",
              newValue: {
                criteriaStr: "customerId =: customer",
                bindVars: [{ name: "customer", value: "TKBUFW52DBM001U" }],
                type: "and",
              },
            },
            time: 1637229177714,
            sequence: 1249,
            actionName: "ReactiveCriteria",
          },
        ],
      },
      {
        dependent: "settleCustomer",
        target: "settlePartyBankAccount",
        weight: 2,
        effect: [
          {
            variables: {
              "$current.settleCustomer": {
                id: "7ARMDW52DCV002D",
                name: "客户01",
                address: "",
                invoiceType: {
                  id: "HHN0HK501610001",
                  aliasName: "增值税专用发票",
                  _ctrlViewFields: {},
                  _ctrlViewMethod: "unavaliable",
                },
                settleCustomer: { id: "7ARMDW52DCV002D", name: "客户01" },
                telephone: "",
                code: "0010000001",
                taxIdNumber: "",
                _ctrlViewFields: {},
                _ctrlViewMethod: "unavaliable",
              },
            },
            ruleId: "Old-StatusChange-65718b9a-a935-4e97-ae61-c5fb606a842e",
            actionIndex: 0,
            result: { type: "Readonly", oldValue: true, newValue: false },
            time: 1637229177749,
            sequence: 1379,
            actionName: "ReactiveFieldStatus",
          },
          {
            variables: { "$current.settleCustomer.id": "7ARMDW52DCV002D" },
            ruleId: "Old-Criteria-a59281d4-9f00-49fa-90b5-586366e3c4e1",
            actionIndex: 0,
            result: {
              type: "criteria",
              newValue: {
                criteriaStr: "objectId=:settleCustomer",
                bindVars: [
                  { name: "settleCustomer", value: "7ARMDW52DCV002D" },
                ],
                type: "and",
              },
            },
            time: 1637229177744,
            sequence: 1357,
            actionName: "ReactiveCriteria",
          },
        ],
      },
      {
        dependent: "settleCustomer",
        target: "contract",
        weight: 1,
        effect: [
          {
            variables: { "$current.settleCustomer.id": "7ARMDW52DCV002D" },
            ruleId: "Old-Criteria-c7639f0d-4790-458a-b146-d5ad576c1368",
            actionIndex: 0,
            result: {
              type: "criteria",
              newValue: {
                criteriaStr: "settleCustomer =: settleCustomer",
                bindVars: [
                  { name: "settleCustomer", value: "7ARMDW52DCV002D" },
                ],
                type: "and",
              },
            },
            time: 1637229177747,
            sequence: 1366,
            actionName: "ReactiveCriteria",
          },
        ],
      },
      {
        dependent: "department",
        target: "ownerUser",
        weight: 1,
        effect: [
          {
            variables: {
              "$current.department": {
                id: "VKQMDW52DCV000A",
                name: "测试三部",
              },
            },
            ruleId: "c38a493d-6253-4a6a-8867-98a1c7179d49",
            actionIndex: 0,
            result: {
              type: "fieldComponentProps",
              oldValue: {
                contextOrgIds: ["1U2VDW52DUM002M"],
                advanceReferProps: {
                  defaultCategory: { id: "VKQMDW52DCV000A" },
                },
              },
              newValue: { defaultCategory: { id: "VKQMDW52DCV000A" } },
            },
            time: 1637229177756,
            sequence: 1393,
            actionName: "ReactiveFieldComponentProps",
          },
        ],
      },
      {
        dependent: "createdOrg",
        target: "revenueConfirmationItems.project",
        weight: 1,
        effect: [
          {
            variables: { "$root.createdOrg.id": "1U2VDW52DUM002M" },
            ruleId: "QueryContext-d39adc47-2111-410e-994c-692727f674ab",
            actionIndex: 0,
            result: {
              type: "fieldComponentProps",
              oldValue: {},
              newValue: { contextOrgIds: ["1U2VDW52DUM002M"] },
            },
            time: 1637229178501,
            sequence: 1560,
            actionName: "ReactiveFieldComponentProps",
          },
        ],
      },
      {
        dependent: "createdOrg",
        target: "revenueConfirmationItems.product",
        weight: 2,
        effect: [
          {
            variables: {
              "$root.createdOrg.id": "1U2VDW52DUM002M",
              "$root.salesOrg.id": "1U2VDW52DUM002M",
            },
            ruleId: "QueryContext-d39adc47-2111-410e-994c-692727f674ab",
            actionIndex: 1,
            result: {
              type: "fieldComponentProps",
              oldValue: {},
              newValue: {
                contextRoleOrgIds: { FinancialOrg: "1U2VDW52DUM002M" },
              },
            },
            time: 1637229178517,
            sequence: 1594,
            actionName: "ReactiveFieldComponentProps",
          },
        ],
      },
      {
        dependent: "createdOrg",
        target: "revenueConfirmationItems.revenue",
        weight: 1,
        effect: [
          {
            variables: { "$root.createdOrg.id": "1U2VDW52DUM002M" },
            ruleId: "QueryContext-d39adc47-2111-410e-994c-692727f674ab",
            actionIndex: 2,
            result: {
              type: "fieldComponentProps",
              oldValue: {},
              newValue: { contextOrgIds: ["1U2VDW52DUM002M"] },
            },
            time: 1637229178532,
            sequence: 1632,
            actionName: "ReactiveFieldComponentProps",
          },
        ],
      },
      {
        dependent: "revenueConfirmationItems.product",
        target: "revenueConfirmationItems.product.code",
        weight: 1,
        effect: [
          {
            variables: {},
            ruleId: "19dcb83f-caca-42a6-bf79-b64463b03994",
            actionIndex: 0,
            result: { type: "Sensitive", oldValue: false, newValue: false },
            time: 1637229178540,
            sequence: 1655,
            actionName: "ReactiveFieldStatus",
          },
        ],
      },
      {
        dependent: "revenueConfirmationItems.product",
        target: "revenueConfirmationItems.product.spec",
        weight: 1,
        effect: [
          {
            variables: {},
            ruleId: "19dcb83f-caca-42a6-bf79-b64463b03994",
            actionIndex: 0,
            result: { type: "Sensitive", oldValue: false, newValue: false },
            time: 1637229178544,
            sequence: 1665,
            actionName: "ReactiveFieldStatus",
          },
        ],
      },
      {
        dependent: "revenueConfirmationItems.product",
        target: "revenueConfirmationItems.product.unit",
        weight: 1,
        effect: [
          {
            variables: {},
            ruleId: "19dcb83f-caca-42a6-bf79-b64463b03994",
            actionIndex: 0,
            result: { type: "Sensitive", oldValue: false, newValue: false },
            time: 1637229178548,
            sequence: 1675,
            actionName: "ReactiveFieldStatus",
          },
        ],
      },
      {
        dependent: "revenueConfirmationItems.contract",
        target: "revenueConfirmationItems.contract.name",
        weight: 1,
        effect: [
          {
            variables: {},
            ruleId: "19dcb83f-caca-42a6-bf79-b64463b03994",
            actionIndex: 0,
            result: { type: "Sensitive", oldValue: false, newValue: false },
            time: 1637229178552,
            sequence: 1685,
            actionName: "ReactiveFieldStatus",
          },
        ],
      },
      {
        dependent: "revenueConfirmationItems.contract",
        target: "revenueConfirmationItems.contract.billType",
        weight: 1,
        effect: [
          {
            variables: {},
            ruleId: "19dcb83f-caca-42a6-bf79-b64463b03994",
            actionIndex: 0,
            result: { type: "Sensitive", oldValue: false, newValue: false },
            time: 1637229178559,
            sequence: 1695,
            actionName: "ReactiveFieldStatus",
          },
        ],
      },
      {
        dependent: "revenueConfirmationItems.contractSubjectMatterItem",
        target: "revenueConfirmationItems.contractSubjectMatterItem.rowNo",
        weight: 1,
        effect: [
          {
            variables: {},
            ruleId: "19dcb83f-caca-42a6-bf79-b64463b03994",
            actionIndex: 0,
            result: { type: "Sensitive", oldValue: false, newValue: false },
            time: 1637229178563,
            sequence: 1705,
            actionName: "ReactiveFieldStatus",
          },
        ],
      },
    ],
    valueDiffer: {
      oldValue: {
        abortedTime: null,
        revenueConfirmationItems: [
          {
            id: "",
            ordinal: 0,
            attachments: [],
            srcItemObjectId: "",
            isPriceWithTax: false,
            description: "",
            _entryMode: "Create",
            uid: 0,
            editFlag: "add",
          },
        ],
        attachments: [],
        uninvoiced: false,
        rcCreatedMethod: {
          id: "RcCreatedMethod.manualAdd",
          ordinal: 3,
          name: "RcCreatedMethod",
          value: "manualAdd",
          title: "手工新增",
          isInitData: true,
        },
        billType: {
          billIoType: { id: "BillIoType.blue", title: "蓝单" },
          businessRules: [],
          businessTypes: [
            {
              businessType: { id: "0H3L8K501JR0021", name: "收入确认单立账" },
              id: "XG3HHL501QD0001",
            },
            {
              businessType: { id: "0H3L8K501JR0022", name: "发票立账" },
              id: "XG3HHL501QD0002",
            },
            {
              businessType: {
                id: "0H3L8K501JR0053",
                name: "收入确认单立账（发票计税）",
              },
              id: "XG3HHL501QD0039",
            },
          ],
          code: "AR01",
          funcUnits: [],
          id: "N3EGHL501QD0001",
          name: "收入确认单",
          sourceRules: [],
          templateSettingValues: [
            {
              id: "M2K7DU513UU001P",
              templates: [
                { id: "U2K7DU513UU00AP" },
                { id: "U2K7DU513UU00AQ" },
                { id: "U2K7DU513UU00AR" },
              ],
            },
          ],
        },
        businessDate: 1637164800000,
        invoiceStatus: {
          id: "InvoiceStatus.none",
          ordinal: 2,
          name: "InvoiceStatus",
          value: "none",
          title: "未开票",
          isInitData: true,
        },
        webEditTemplate: {
          code: "",
          createdOrg: { id: "K4WUXS50JUD0004", name: "全局" },
          id: "dp3DeFzWR",
          name: "收入确认单",
        },
        closedTime: null,
        isAutoGenerated: false,
        id: "",
        settleBankName: "",
        finishedReason: "",
        billIoType: { id: "BillIoType.blue", title: "蓝单" },
        abortedReason: "",
        receiptStatus: {
          id: "ReceiptStatus.none",
          ordinal: 2,
          name: "ReceiptStatus",
          value: "none",
          title: "未收款",
          isInitData: true,
        },
        revenueConfirmationDataType: {
          id: "RevenueConfirmationDataType.standard",
          ordinal: 2,
          name: "RevenueConfirmationDataType",
          value: "standard",
          title: "标准",
          isInitData: true,
        },
        settleTelephone: "",
        suspendedTime: null,
        billFullStatusObject: {
          id: "BillStatus.draft",
          ordinal: 0,
          name: "BillStatus",
          value: "draft",
          title: "未提交",
          isInitData: true,
        },
        planRecDate: 1637164800000,
        isManualCode: false,
        billStatusObject: {
          id: "BillStatus.draft",
          ordinal: 0,
          name: "BillStatus",
          value: "draft",
          title: "未提交",
          isInitData: true,
        },
        salesOrg: {
          code: "001007",
          id: "1U2VDW52DUM002M",
          isCustomer: false,
          isEnabled: true,
          isFinancialOrg: true,
          isInventoryOrg: false,
          isLegalEntity: false,
          isOtherParty: false,
          isProjectOrg: false,
          isPurchaseOrg: true,
          isSalesOrg: true,
          isVendor: false,
          isVirtual: false,
          name: "财务组织A（成都）",
          organizationRoles: [
            { id: "1U2VDW52DUM002L", partyRoleType: { id: "FinancialOrg" } },
            { id: "DSN8EW52DMX0031", partyRoleType: { id: "PurchaseOrg" } },
            { id: "DSN8EW52DMX0032", partyRoleType: { id: "SalesOrg" } },
          ],
          ownerLegalEntityOrg: { id: "LD61DW52DBB001Q", name: "成都企企" },
          partyRoles: [
            { id: "1U2VDW52DUM002L" },
            { id: "DSN8EW52DMX0031" },
            { id: "DSN8EW52DMX0032" },
          ],
          partyType: { id: "OperationUnit", name: "经营单元" },
        },
        isSuspended: false,
        exchangeRate: 1,
        suspendedReason: "",
        settleTaxIdNumber: "",
        settleAddress: "",
        createdOrg: {
          code: "001007",
          id: "1U2VDW52DUM002M",
          isCustomer: false,
          isEnabled: true,
          isFinancialOrg: true,
          isInventoryOrg: false,
          isLegalEntity: false,
          isOtherParty: false,
          isProjectOrg: false,
          isPurchaseOrg: true,
          isSalesOrg: true,
          isVendor: false,
          isVirtual: false,
          name: "财务组织A（成都）",
          organizationRoles: [
            { id: "1U2VDW52DUM002L", partyRoleType: { id: "FinancialOrg" } },
            { id: "DSN8EW52DMX0031", partyRoleType: { id: "PurchaseOrg" } },
            { id: "DSN8EW52DMX0032", partyRoleType: { id: "SalesOrg" } },
          ],
          ownerLegalEntityOrg: { id: "LD61DW52DBB001Q", name: "成都企企" },
          partyRoles: [
            { id: "1U2VDW52DUM002L" },
            { id: "DSN8EW52DMX0031" },
            { id: "DSN8EW52DMX0032" },
          ],
          partyType: { id: "OperationUnit", name: "经营单元" },
        },
        code: "1007AR0120211100020",
        isInitBill: false,
        finishedTime: null,
        isPriceWithTax: true,
        description: "",
        currency: {
          id: "FX3V3K501JR0001",
          isLocalCurrency: true,
          name: "人民币",
          precision: 4,
          rateBase: 1,
        },
        invoiceCode: "",
        closedReason: "",
        businessType: { id: "0H3L8K501JR0021", name: "收入确认单立账" },
        approvedTime: null,
      },
      newValue: {
        abortedTime: null,
        revenueConfirmationItems: [
          {
            id: "",
            project: {
              id: "4EFUFW52DBM001L",
              name: "项目5",
              code: "001000000003",
              aidCode: "XM5",
              customer: {
                id: "TKBUFW52DBM001U",
                name: "客户3",
                settleCustomer: {
                  id: "7ARMDW52DCV002D",
                  name: "客户01",
                  address: "",
                  invoiceType: {
                    id: "HHN0HK501610001",
                    aliasName: "增值税专用发票",
                    _ctrlViewFields: {},
                    _ctrlViewMethod: "unavaliable",
                  },
                  settleCustomer: { id: "7ARMDW52DCV002D", name: "客户01" },
                  telephone: "",
                  code: "0010000001",
                  taxIdNumber: "",
                  _ctrlViewFields: {},
                  _ctrlViewMethod: "unavaliable",
                },
                ownerDept: { id: "VKQMDW52DCV000A", name: "测试三部" },
                ownerUser: { id: "RKQMDW52DCV002S", name: "王小二" },
                taxIdNumber: "",
                address: "",
                telephone: "",
                _ctrlViewFields: {},
                _ctrlViewMethod: "unavaliable",
              },
              category: {
                id: "6NMMDW52DCV0008",
                name: "项目分类1",
                code: "001",
                idPath: "6NMMDW52DCV0008,",
                _ctrlViewFields: {},
                _ctrlViewMethod: "unavaliable",
              },
              financialOrg: { id: "LD61DW52DBB001Q", name: "成都企企" },
              createdOrg: {
                id: "LD61DW52DBB001Q",
                name: "成都企企",
                isFinancialOrg: true,
                isSalesOrg: true,
                isProjectOrg: true,
                isInventoryOrg: true,
                isLegalEntity: true,
                isPurchaseOrg: true,
                _ctrlViewFields: {},
                _ctrlViewMethod: "unavaliable",
              },
              stages: [
                {
                  id: "T5GUFW52DBM0001",
                  stage: { id: "RDCWDW52DUM001W", name: "阶段1" },
                },
                {
                  id: "T5GUFW52DBM0002",
                  stage: { id: "RDCWDW52DUM002R", name: "阶段4" },
                },
              ],
              projectOrg: { id: "LD61DW52DBB001Q", name: "成都企企" },
              usedProjectOrgIds: [
                "K4WUXS50JUD0011",
                "KR51DW52DBB002F",
                "LD61DW52DBB001Q",
                "LHPXDW52DUM000A",
                "DSN8EW52DMX001G",
                "7M6WEW52DQJ000R",
              ],
              billType: { id: "QT3GHL501QD0001", name: "项目" },
              idPath: "4EFUFW52DBM001L,",
              parents: [],
              deliverOrgs: [
                { id: "T5GUFW52DBM0005", code: "" },
                { id: "T5GUFW52DBM0006", code: "" },
                { id: "T5GUFW52DBM0007", code: "" },
              ],
              ownerDept: { id: "VKQMDW52DCV0009", name: "测试二部" },
              ownerUser: { id: "RKQMDW52DCV0031", name: "左江令" },
              planStartDate: 1635609600000,
              planEndDate: 1638547200000,
              _ctrlViewMethod: "unavaliable",
              _ctrlViewFields: {},
              _ctrlEditMethod: "avaliable",
              _ctrlEditFields: {},
            },
            currency: {
              id: "FX3V3K501JR0001",
              isLocalCurrency: true,
              name: "人民币",
              precision: 4,
              rateBase: 1,
            },
            revenueConfirmationDataType: {
              id: "RevenueConfirmationDataType.standard",
              ordinal: 2,
              name: "RevenueConfirmationDataType",
              value: "standard",
              title: "标准",
              isInitData: true,
            },
            ordinal: 0,
            attachments: [],
            srcItemObjectId: "",
            isPriceWithTax: true,
            description: "",
            taxRate: 0,
            exchangeRate: 1,
            _entryMode: "Create",
            uid: 0,
            editFlag: "add",
          },
          {
            id: "",
            ordinal: 1,
            attachments: [],
            srcItemObjectId: "",
            isPriceWithTax: false,
            description: "",
            _entryMode: "Create",
            uid: 1,
            editFlag: "add",
          },
        ],
        attachments: [],
        department: { id: "VKQMDW52DCV000A", name: "测试三部" },
        uninvoiced: false,
        rcCreatedMethod: {
          id: "RcCreatedMethod.manualAdd",
          ordinal: 3,
          name: "RcCreatedMethod",
          value: "manualAdd",
          title: "手工新增",
          isInitData: true,
        },
        billType: {
          billIoType: { id: "BillIoType.blue", title: "蓝单" },
          businessRules: [],
          businessTypes: [
            {
              businessType: { id: "0H3L8K501JR0021", name: "收入确认单立账" },
              id: "XG3HHL501QD0001",
            },
            {
              businessType: { id: "0H3L8K501JR0022", name: "发票立账" },
              id: "XG3HHL501QD0002",
            },
            {
              businessType: {
                id: "0H3L8K501JR0053",
                name: "收入确认单立账（发票计税）",
              },
              id: "XG3HHL501QD0039",
            },
          ],
          code: "AR01",
          funcUnits: [],
          id: "N3EGHL501QD0001",
          name: "收入确认单",
          sourceRules: [],
          templateSettingValues: [
            {
              id: "M2K7DU513UU001P",
              templates: [
                { id: "U2K7DU513UU00AP" },
                { id: "U2K7DU513UU00AQ" },
                { id: "U2K7DU513UU00AR" },
              ],
            },
          ],
        },
        businessDate: 1637164800000,
        invoiceStatus: {
          id: "InvoiceStatus.none",
          ordinal: 2,
          name: "InvoiceStatus",
          value: "none",
          title: "未开票",
          isInitData: true,
        },
        webEditTemplate: {
          code: "",
          createdOrg: { id: "K4WUXS50JUD0004", name: "全局" },
          id: "dp3DeFzWR",
          name: "收入确认单",
        },
        closedTime: null,
        isAutoGenerated: false,
        id: "",
        settleBankName: "",
        finishedReason: "",
        billIoType: { id: "BillIoType.blue", title: "蓝单" },
        abortedReason: "",
        receiptStatus: {
          id: "ReceiptStatus.none",
          ordinal: 2,
          name: "ReceiptStatus",
          value: "none",
          title: "未收款",
          isInitData: true,
        },
        revenueConfirmationDataType: {
          id: "RevenueConfirmationDataType.standard",
          ordinal: 2,
          name: "RevenueConfirmationDataType",
          value: "standard",
          title: "标准",
          isInitData: true,
        },
        customer: {
          id: "TKBUFW52DBM001U",
          name: "客户3",
          settleCustomer: {
            id: "7ARMDW52DCV002D",
            name: "客户01",
            address: "",
            invoiceType: {
              id: "HHN0HK501610001",
              aliasName: "增值税专用发票",
              _ctrlViewFields: {},
              _ctrlViewMethod: "unavaliable",
            },
            settleCustomer: { id: "7ARMDW52DCV002D", name: "客户01" },
            telephone: "",
            code: "0010000001",
            taxIdNumber: "",
            _ctrlViewFields: {},
            _ctrlViewMethod: "unavaliable",
          },
          ownerDept: { id: "VKQMDW52DCV000A", name: "测试三部" },
          ownerUser: { id: "RKQMDW52DCV002S", name: "王小二" },
          taxIdNumber: "",
          address: "",
          telephone: "",
          _ctrlViewFields: {},
          _ctrlViewMethod: "unavaliable",
        },
        settleTelephone: "",
        suspendedTime: null,
        billFullStatusObject: {
          id: "BillStatus.draft",
          ordinal: 0,
          name: "BillStatus",
          value: "draft",
          title: "未提交",
          isInitData: true,
        },
        ownerUser: { id: "RKQMDW52DCV002S", name: "王小二" },
        planRecDate: 1637164800000,
        isManualCode: false,
        billStatusObject: {
          id: "BillStatus.draft",
          ordinal: 0,
          name: "BillStatus",
          value: "draft",
          title: "未提交",
          isInitData: true,
        },
        salesOrg: {
          code: "001007",
          id: "1U2VDW52DUM002M",
          isCustomer: false,
          isEnabled: true,
          isFinancialOrg: true,
          isInventoryOrg: false,
          isLegalEntity: false,
          isOtherParty: false,
          isProjectOrg: false,
          isPurchaseOrg: true,
          isSalesOrg: true,
          isVendor: false,
          isVirtual: false,
          name: "财务组织A（成都）",
          organizationRoles: [
            { id: "1U2VDW52DUM002L", partyRoleType: { id: "FinancialOrg" } },
            { id: "DSN8EW52DMX0031", partyRoleType: { id: "PurchaseOrg" } },
            { id: "DSN8EW52DMX0032", partyRoleType: { id: "SalesOrg" } },
          ],
          ownerLegalEntityOrg: { id: "LD61DW52DBB001Q", name: "成都企企" },
          partyRoles: [
            { id: "1U2VDW52DUM002L" },
            { id: "DSN8EW52DMX0031" },
            { id: "DSN8EW52DMX0032" },
          ],
          partyType: { id: "OperationUnit", name: "经营单元" },
        },
        isSuspended: false,
        invoiceType: {
          id: "HHN0HK501610001",
          aliasName: "增值税专用发票",
          _ctrlViewFields: {},
          _ctrlViewMethod: "unavaliable",
        },
        exchangeRate: 1,
        suspendedReason: "",
        settleTaxIdNumber: "",
        settleAddress: "",
        createdOrg: {
          code: "001007",
          id: "1U2VDW52DUM002M",
          isCustomer: false,
          isEnabled: true,
          isFinancialOrg: true,
          isInventoryOrg: false,
          isLegalEntity: false,
          isOtherParty: false,
          isProjectOrg: false,
          isPurchaseOrg: true,
          isSalesOrg: true,
          isVendor: false,
          isVirtual: false,
          name: "财务组织A（成都）",
          organizationRoles: [
            { id: "1U2VDW52DUM002L", partyRoleType: { id: "FinancialOrg" } },
            { id: "DSN8EW52DMX0031", partyRoleType: { id: "PurchaseOrg" } },
            { id: "DSN8EW52DMX0032", partyRoleType: { id: "SalesOrg" } },
          ],
          ownerLegalEntityOrg: { id: "LD61DW52DBB001Q", name: "成都企企" },
          partyRoles: [
            { id: "1U2VDW52DUM002L" },
            { id: "DSN8EW52DMX0031" },
            { id: "DSN8EW52DMX0032" },
          ],
          partyType: { id: "OperationUnit", name: "经营单元" },
        },
        code: "1007AR0120211100020",
        isInitBill: false,
        finishedTime: null,
        settleCustomer: {
          id: "7ARMDW52DCV002D",
          name: "客户01",
          address: "",
          invoiceType: {
            id: "HHN0HK501610001",
            aliasName: "增值税专用发票",
            _ctrlViewFields: {},
            _ctrlViewMethod: "unavaliable",
          },
          settleCustomer: { id: "7ARMDW52DCV002D", name: "客户01" },
          telephone: "",
          code: "0010000001",
          taxIdNumber: "",
          _ctrlViewFields: {},
          _ctrlViewMethod: "unavaliable",
        },
        isPriceWithTax: false,
        project: {
          id: "4EFUFW52DBM001L",
          name: "项目5",
          code: "001000000003",
          aidCode: "XM5",
          customer: {
            id: "TKBUFW52DBM001U",
            name: "客户3",
            settleCustomer: {
              id: "7ARMDW52DCV002D",
              name: "客户01",
              address: "",
              invoiceType: {
                id: "HHN0HK501610001",
                aliasName: "增值税专用发票",
                _ctrlViewFields: {},
                _ctrlViewMethod: "unavaliable",
              },
              settleCustomer: { id: "7ARMDW52DCV002D", name: "客户01" },
              telephone: "",
              code: "0010000001",
              taxIdNumber: "",
              _ctrlViewFields: {},
              _ctrlViewMethod: "unavaliable",
            },
            ownerDept: { id: "VKQMDW52DCV000A", name: "测试三部" },
            ownerUser: { id: "RKQMDW52DCV002S", name: "王小二" },
            taxIdNumber: "",
            address: "",
            telephone: "",
            _ctrlViewFields: {},
            _ctrlViewMethod: "unavaliable",
          },
          category: {
            id: "6NMMDW52DCV0008",
            name: "项目分类1",
            code: "001",
            idPath: "6NMMDW52DCV0008,",
            _ctrlViewFields: {},
            _ctrlViewMethod: "unavaliable",
          },
          financialOrg: { id: "LD61DW52DBB001Q", name: "成都企企" },
          createdOrg: {
            id: "LD61DW52DBB001Q",
            name: "成都企企",
            isFinancialOrg: true,
            isSalesOrg: true,
            isProjectOrg: true,
            isInventoryOrg: true,
            isLegalEntity: true,
            isPurchaseOrg: true,
            _ctrlViewFields: {},
            _ctrlViewMethod: "unavaliable",
          },
          stages: [
            {
              id: "T5GUFW52DBM0001",
              stage: { id: "RDCWDW52DUM001W", name: "阶段1" },
            },
            {
              id: "T5GUFW52DBM0002",
              stage: { id: "RDCWDW52DUM002R", name: "阶段4" },
            },
          ],
          projectOrg: { id: "LD61DW52DBB001Q", name: "成都企企" },
          usedProjectOrgIds: [
            "K4WUXS50JUD0011",
            "KR51DW52DBB002F",
            "LD61DW52DBB001Q",
            "LHPXDW52DUM000A",
            "DSN8EW52DMX001G",
            "7M6WEW52DQJ000R",
          ],
          billType: { id: "QT3GHL501QD0001", name: "项目" },
          idPath: "4EFUFW52DBM001L,",
          parents: [],
          deliverOrgs: [
            { id: "T5GUFW52DBM0005", code: "" },
            { id: "T5GUFW52DBM0006", code: "" },
            { id: "T5GUFW52DBM0007", code: "" },
          ],
          ownerDept: { id: "VKQMDW52DCV0009", name: "测试二部" },
          ownerUser: { id: "RKQMDW52DCV0031", name: "左江令" },
          planStartDate: 1635609600000,
          planEndDate: 1638547200000,
          _ctrlViewMethod: "unavaliable",
          _ctrlViewFields: {},
          _ctrlEditMethod: "avaliable",
          _ctrlEditFields: {},
        },
        description: "",
        currency: {
          id: "FX3V3K501JR0001",
          isLocalCurrency: true,
          name: "人民币",
          precision: 4,
          rateBase: 1,
        },
        invoiceCode: "",
        closedReason: "",
        businessType: { id: "0H3L8K501JR0021", name: "收入确认单立账" },
        approvedTime: null,
      },
    },
    trigger: {
      time: new Date().getTime(),
      title: "少时诵诗书时",
      field: "asdasdasdasd",
    },
  },
];
export const dsMockDic2 = (): RuleDefination[] => [
  {
    ruleId: "f03c2356-709c-48f3-800a-90c8f3e5599e",
    actionIndex: 0,
    actionName: "ReactiveCriteria",
    params: {
      field: "projectStage",
      fragment: {
        bindVars: { projectId: "$current.project.id" },
        criteriaStr: "projectId = :projectId",
        fireImmediately: true,
      },
    },
    store: { description: "项目过滤项目阶段" },
  },
  {
    ruleId: "9993a8e2-46f5-437a-96c9-a7faab36ce90",
    actionIndex: 0,
    actionName: "ReactiveFieldStatus",
    params: {
      effect: {
        expr: "true",
        fireImmediately: true,
        status: "Readonly",
        when: "!$current.project",
      },
      field: "projectStage",
    },
    store: { description: "选择项目才可以选择项目阶段" },
  },
  {
    ruleId: "d0d5c529-d27b-4aed-8394-a84b2634a81e",
    actionIndex: 0,
    actionName: "ReactiveAssignment",
    params: {
      effect: {
        autoClear: false,
        expr: "undefined",
        fireImmediately: true,
        when: "!$current.project",
      },
      field: "projectStage",
    },
    store: { description: "清空项目时，同时清空阶段" },
  },
  {
    ruleId: "de95ee5d-2f51-4d0e-86e7-343b0972898f",
    actionIndex: 0,
    actionName: "Assignment",
    params: { expr: "undefined", field: "projectStage" },
    store: {
      trigger: { event: "Change", target: "$current.project" },
      description: "【项目】改变清空【项目阶段】",
      condition: {
        if: "$fn.needClearProjectStage($current.projectStage,$current.project)",
      },
    },
  },
  {
    ruleId: "af0f185b-00bb-4f68-a554-8fd03723fb8d",
    actionIndex: 0,
    actionName: "ReactiveFieldStatus",
    params: {
      effect: {
        expr: "true",
        fireImmediately: true,
        status: "Readonly",
        when: "!$current.project",
      },
      field: "projectOrg",
    },
    store: {
      description: "无【项目】时，【项目组织】不可选。",
      condition: { if: "$context.isEnabledMultiOrg === true" },
    },
  },
  {
    ruleId: "757b5191-7f89-44cf-b8bd-f528474efbfc",
    actionIndex: 0,
    actionName: "Assignment",
    params: {
      expr: "$fn.queryProjectOrgDefault($current.project, $root.createdOrg,$current.projectOrg,$context.scenario )",
      field: "projectOrg",
    },
    store: {
      trigger: { event: "Change", target: "$current.project" },
      description:
        "去掉这个携带，携带不正确；创建组织具有项目属性，并且创建组织等于项目的财务组织，携带创建组织到项目组织上",
      condition: {
        if: "$context.isEnabledMultiOrg === true && $current.project.$focused && $context.scenario !=='ChangeProjectAlert'",
      },
    },
  },
  {
    ruleId: "77344a39-f221-43ac-b4dd-837aab7bddfe",
    actionIndex: 0,
    actionName: "ReactiveCriteria",
    params: {
      field: "projectOrg",
      fragment: {
        autoClear: true,
        bindVars: { pid: "$current.project.id" },
        criteriaStr:
          "m.id in (select jsonb_array_elements_text(usedProjectOrgIds) from Project where id=:pid)",
        fireImmediately: true,
      },
    },
    store: {
      description: "【项目组织】可选范围为，项目-交付组织",
      condition: { if: "$context.isEnabledMultiOrg === true" },
    },
  },
  {
    ruleId: "be8086e2-1d89-493a-8fa8-859880f28674",
    actionIndex: 0,
    actionName: "ReactiveAssignment",
    params: {
      effect: {
        autoClear: true,
        expr: "$fn.queryProjectOrgDefault($current.project, $root.createdOrg)",
        fireImmediately: false,
        override: true,
        when: "$current.project.$focused",
      },
      field: "projectOrg",
    },
    store: {
      description: "项目组织默认携带",
      condition: { if: "false && $context.isEnabledMultiOrg === true" },
    },
  },
  {
    ruleId: "9f0e77ab-8518-4d6f-9993-da57b72e2e8c",
    actionIndex: 0,
    actionName: "ReactiveAssignment",
    params: {
      effect: {
        autoClear: "true",
        expr: "$root.customer.ownerUser",
        fireImmediately: "$context.mode == 'Create'",
        override: "true",
        when: "!$variable.isSourcePicking",
      },
      field: "ownerUser",
    },
    store: { description: "transObject.settleXX  => settleObjectXX" },
  },
  {
    ruleId: "9f0e77ab-8518-4d6f-9993-da57b72e2e8d",
    actionIndex: 0,
    actionName: "ReactiveAssignment",
    params: {
      effect: {
        autoClear: "true",
        expr: "$fn.querySettleObject($root.customer,'ownerUser','')",
        fireImmediately: "$context.mode == 'Create'",
        override: "true",
        when: "false",
      },
      field: "ownerUser",
    },
    store: { description: "异步 transObject.settleXX  => settleObjectXX" },
  },
  {
    ruleId: "4029b5ad-ef07-44b6-b7c7-5254414a203f",
    actionIndex: 0,
    actionName: "ReactiveMasterToTables",
    params: {
      sourceValue: "$current.project",
      targets: [
        {
          dataTable: "revenueConfirmationItems",
          field: "project",
          viewName: "Initialized",
          when: "!$current.srcItemObjectId",
        },
      ],
      when: "$current.project.$focused && $current.project",
    },
    store: { description: "头体同步" },
  },
  {
    ruleId: "ea819840-fe85-4112-9bda-7d067b009c53",
    actionIndex: 0,
    actionName: "ReactiveTablesToMaster",
    params: {
      aggregationMethod: "Equal",
      clearFieldWhenDifferent: true,
      disableFieldWhenDifferent: true,
      field: "project",
      fireImmediately: "true",
      sourceValues: [
        {
          dataTable: "revenueConfirmationItems",
          expr: "$current.project",
          viewName: "Initialized",
          when: "true",
        },
      ],
    },
    store: { description: "体头同步" },
  },
  {
    ruleId: "c38a493d-6253-4a6a-8867-98a1c7179d49",
    actionIndex: 0,
    actionName: "ReactiveFieldComponentProps",
    params: {
      effect: {
        fireImmediately: true,
        props: {
          defaultCategory:
            "$fn.highLightDepartmentInUserRefer($current.department)",
        },
        when: "true || $current.department",
      },
      field: "ownerUser",
    },
    store: { description: "" },
  },
  {
    ruleId: "d0e2c360-c889-44ba-ba77-e0a9bf94201d",
    actionIndex: 0,
    actionName: "Assignment",
    params: {
      expr: "$fn.queryProjectOrgDefaultByStage($current.projectStage, $current.projectOrg,$context.scenario )",
      field: "projectOrg",
    },
    store: {
      trigger: { event: "Change", target: "$current.projectStage" },
      description: "项目阶段携带项目组织",
      condition: {
        if: "$context.isEnabledMultiOrg === true && $current.projectStage.$focused && $context.scenario !=='ChangeProjectAlert'",
      },
    },
  },
  {
    ruleId: "OrgRoleTypeIds-c7b6ca5f-b8e6-490b-a7d9-bfccb96f8899",
    actionIndex: 0,
    actionName: "ReactiveFieldComponentProps",
    params: {
      field: "createdOrg",
      effect: {
        props: { orgRoleTypeIds: ["FinancialOrg"] },
        isDestruct: false,
        when: "true",
        fireImmediately: true,
      },
    },
    store: { description: "" },
  },
  {
    ruleId: "OrgRoleTypeIds-ef2227a0-2a25-4905-b0dd-1d26a15af46a",
    actionIndex: 0,
    actionName: "ReactiveFieldComponentProps",
    params: {
      field: "salesOrg",
      effect: {
        props: { orgRoleTypeIds: ["SalesOrg"] },
        isDestruct: false,
        when: "true",
        fireImmediately: true,
      },
    },
    store: { description: "" },
  },
  {
    ruleId: "OrgRoleTypeIds-dc4a0a54-770e-4add-aeb0-5a2f30bafd63",
    actionIndex: 0,
    actionName: "ReactiveFieldComponentProps",
    params: {
      field: "projectOrg",
      effect: {
        props: { orgRoleTypeIds: ["ProjectOrg"] },
        isDestruct: false,
        when: "true",
        fireImmediately: true,
      },
    },
    store: { description: "" },
  },
  {
    ruleId: "QueryContext-f15d80cf-4218-47b5-b22d-229e314e7ea3",
    actionIndex: 0,
    actionName: "ReactiveFieldComponentProps",
    params: {
      field: "project",
      effects: [
        {
          props: { contextOrgIds: "[$current.createdOrg.id]" },
          isDestruct: false,
          when: "$current.createdOrg.id",
          fireImmediately: true,
        },
      ],
    },
    store: { description: "" },
  },
  {
    ruleId: "QueryContext-f15d80cf-4218-47b5-b22d-229e314e7ea3",
    actionIndex: 1,
    actionName: "ReactiveFieldComponentProps",
    params: {
      field: "customer",
      effects: [
        {
          props: { contextOrgIds: "[$current.createdOrg.id]" },
          isDestruct: false,
          when: "$current.createdOrg.id",
          fireImmediately: true,
        },
        {
          props: { "contextRoleOrgIds.FinancialOrg": "$current.createdOrg.id" },
          isDestruct: true,
          when: "$current.createdOrg.id",
          fireImmediately: true,
        },
        {
          props: { "contextRoleOrgIds.SalesOrg": "$current.salesOrg.id" },
          isDestruct: true,
          when: "$current.salesOrg.id",
          fireImmediately: true,
        },
      ],
    },
    store: { description: "" },
  },
  {
    ruleId: "QueryContext-f15d80cf-4218-47b5-b22d-229e314e7ea3",
    actionIndex: 2,
    actionName: "ReactiveFieldComponentProps",
    params: {
      field: "settleCustomer",
      effects: [
        {
          props: { contextOrgIds: "[$current.createdOrg.id]" },
          isDestruct: false,
          when: "$current.createdOrg.id",
          fireImmediately: true,
        },
        {
          props: { "contextRoleOrgIds.FinancialOrg": "$current.createdOrg.id" },
          isDestruct: true,
          when: "$current.createdOrg.id",
          fireImmediately: true,
        },
        {
          props: { "contextRoleOrgIds.SalesOrg": "$current.salesOrg.id" },
          isDestruct: true,
          when: "$current.salesOrg.id",
          fireImmediately: true,
        },
      ],
    },
    store: { description: "" },
  },
  {
    ruleId: "QueryContext-f15d80cf-4218-47b5-b22d-229e314e7ea3",
    actionIndex: 3,
    actionName: "ReactiveFieldComponentProps",
    params: {
      field: "closedBizReason",
      effects: [
        {
          props: { contextOrgIds: "[$current.createdOrg.id]" },
          isDestruct: false,
          when: "$current.createdOrg.id",
          fireImmediately: true,
        },
      ],
    },
    store: { description: "" },
  },
  {
    ruleId: "QueryContext-f15d80cf-4218-47b5-b22d-229e314e7ea3",
    actionIndex: 4,
    actionName: "ReactiveFieldComponentProps",
    params: {
      field: "suspendedBizReason",
      effects: [
        {
          props: { contextOrgIds: "[$current.createdOrg.id]" },
          isDestruct: false,
          when: "$current.createdOrg.id",
          fireImmediately: true,
        },
      ],
    },
    store: { description: "" },
  },
  {
    ruleId: "ContextRoleOrgDepartmentRelationship_department",
    actionIndex: 0,
    actionName: "ReactiveFieldComponentProps",
    params: {
      field: "department",
      effect: {
        props: { contextOrgIds: "[$current.createdOrg.id]" },
        isDestruct: false,
        when: "$current.salesOrg.id === null || $current.salesOrg.id === undefined",
        fireImmediately: true,
      },
    },
    store: { description: "" },
  },
  {
    ruleId: "ContextRoleOrgPersonRelationship_ownerUser",
    actionIndex: 0,
    actionName: "ReactiveFieldComponentProps",
    params: {
      field: "ownerUser",
      effect: {
        props: { contextOrgIds: "[$current.createdOrg.id]" },
        isDestruct: false,
        when: "$current.salesOrg.id === null || $current.salesOrg.id === undefined",
        fireImmediately: true,
      },
    },
    store: { description: "" },
  },
  {
    ruleId: "CreatedOrg-Status-Control",
    actionIndex: 0,
    actionName: "ReactiveFieldStatus",
    params: {
      field: "createdOrg",
      effect: { status: "Readonly", expr: false, fireImmediately: true },
    },
    store: { description: "" },
  },
  {
    ruleId: "BusinessModuleIds",
    actionIndex: 0,
    actionName: "ReactiveFieldComponentProps",
    params: {
      field: "createdOrg",
      effect: {
        props: { businessModuleIds: "$context.businessModuleIds" },
        isDestruct: false,
        fireImmediately: true,
      },
    },
    store: { description: "" },
  },
  {
    ruleId: "Old-Carry-5f26297c-4138-4684-9c28-07d2e5079e8c",
    actionIndex: 0,
    actionName: "ReactiveAssignment",
    params: {
      field: "settleBankName",
      effect: {
        expr: "$current.settlePartyBankAccount.bankName",
        override: true,
        autoClear: true,
        fireImmediately: false,
      },
    },
    store: { description: "" },
  },
  {
    ruleId: "Old-Carry-14c9dde1-6e1e-450d-a7cd-f3e662927dbc",
    actionIndex: 0,
    actionName: "ReactiveAssignment",
    params: {
      field: "settlePartyBankAccount",
      effect: {
        expr: "$current.settleCustomer.defaultBankAccount",
        override: true,
        autoClear: true,
        fireImmediately: false,
      },
    },
    store: { description: "" },
  },
  {
    ruleId: "Old-Criteria-ed2c93b3-7314-4d56-bce0-b5c1f64158c9",
    actionIndex: 0,
    actionName: "ReactiveCriteria",
    params: {
      field: "contact",
      fragment: {
        criteriaStr: "objectId=:customer",
        bindVars: { customer: "$current.customer.id" },
        fireImmediately: true,
      },
    },
    store: { description: "" },
  },
  {
    ruleId: "Old-Criteria-a59281d4-9f00-49fa-90b5-586366e3c4e1",
    actionIndex: 0,
    actionName: "ReactiveCriteria",
    params: {
      field: "settlePartyBankAccount",
      fragment: {
        criteriaStr: "objectId=:settleCustomer",
        bindVars: { settleCustomer: "$current.settleCustomer.id" },
        fireImmediately: true,
      },
    },
    store: { description: "" },
  },
  {
    ruleId: "Old-Criteria-7642e0ef-3042-4939-a28c-ad9545b79a65",
    actionIndex: 0,
    actionName: "ReactiveCriteria",
    params: {
      field: "contract",
      fragment: {
        criteriaStr: "customerId =: customer",
        bindVars: { customer: "$current.customer.id" },
        autoClear: true,
        fireImmediately: true,
      },
    },
    store: { description: "" },
  },
  {
    ruleId: "Old-Criteria-7642e0ef-3042-4939-a28c-ad9545b79a65",
    actionIndex: 1,
    actionName: "ReactiveAssignment",
    params: {
      field: "contract",
      effect: {
        expr: "undefined",
        override: true,
        autoClear: false,
        when: "!$current.customer",
        fireImmediately: true,
      },
    },
    store: { description: "" },
  },
  {
    ruleId: "Old-Criteria-e873f4b2-8398-4474-a5b8-9b5da320299c",
    actionIndex: 0,
    actionName: "ReactiveCriteria",
    params: {
      field: "contract",
      fragment: {
        criteriaStr: "customerId =: customer",
        bindVars: { customer: "$current.customer.id" },
        autoClear: true,
        fireImmediately: true,
      },
    },
    store: { description: "" },
  },
  {
    ruleId: "Old-Criteria-e873f4b2-8398-4474-a5b8-9b5da320299c",
    actionIndex: 1,
    actionName: "ReactiveAssignment",
    params: {
      field: "contract",
      effect: {
        expr: "undefined",
        override: true,
        autoClear: false,
        when: "!$current.customer",
        fireImmediately: true,
      },
    },
    store: { description: "" },
  },
  {
    ruleId: "Old-Criteria-7b843979-f6a6-496e-8956-22c03cd8adde",
    actionIndex: 0,
    actionName: "ReactiveCriteria",
    params: {
      field: "contract",
      fragment: {
        criteriaStr: "customerId =: customer",
        bindVars: { customer: "$current.customer.id" },
        autoClear: true,
        fireImmediately: true,
      },
    },
    store: { description: "" },
  },
  {
    ruleId: "Old-Criteria-7b843979-f6a6-496e-8956-22c03cd8adde",
    actionIndex: 1,
    actionName: "ReactiveAssignment",
    params: {
      field: "contract",
      effect: {
        expr: "undefined",
        override: true,
        autoClear: false,
        when: "!$current.customer",
        fireImmediately: true,
      },
    },
    store: { description: "" },
  },
  {
    ruleId: "Old-Criteria-045c84e4-b72f-4847-86b5-0fa6c497e32a",
    actionIndex: 0,
    actionName: "ReactiveCriteria",
    params: {
      field: "contract",
      fragment: {
        criteriaStr: "customerId =: customer",
        bindVars: { customer: "$current.customer.id" },
        autoClear: true,
        fireImmediately: true,
      },
    },
    store: { description: "" },
  },
  {
    ruleId: "Old-Criteria-045c84e4-b72f-4847-86b5-0fa6c497e32a",
    actionIndex: 1,
    actionName: "ReactiveAssignment",
    params: {
      field: "contract",
      effect: {
        expr: "undefined",
        override: true,
        autoClear: false,
        when: "!$current.customer",
        fireImmediately: true,
      },
    },
    store: { description: "" },
  },
  {
    ruleId: "Old-Criteria-e5928ef3-68eb-4232-a2e1-c983bf702256",
    actionIndex: 0,
    actionName: "ReactiveCriteria",
    params: {
      field: "contract",
      fragment: {
        criteriaStr: "currencyId =: currency",
        bindVars: { currency: "$current.currency.id" },
        autoClear: true,
        fireImmediately: true,
      },
    },
    store: { description: "" },
  },
  {
    ruleId: "Old-Criteria-e5928ef3-68eb-4232-a2e1-c983bf702256",
    actionIndex: 1,
    actionName: "ReactiveAssignment",
    params: {
      field: "contract",
      effect: {
        expr: "undefined",
        override: true,
        autoClear: false,
        when: "!$current.currency",
        fireImmediately: true,
      },
    },
    store: { description: "" },
  },
  {
    ruleId: "Old-Criteria-18c71fdd-b3ee-4364-9669-78edb7f48ef5",
    actionIndex: 0,
    actionName: "ReactiveCriteria",
    params: {
      field: "contract",
      fragment: {
        criteriaStr: "createdOrgId =: createdOrg",
        bindVars: { createdOrg: "$current.createdOrg.id" },
        autoClear: true,
        fireImmediately: true,
      },
    },
    store: { description: "" },
  },
  {
    ruleId: "Old-Criteria-18c71fdd-b3ee-4364-9669-78edb7f48ef5",
    actionIndex: 1,
    actionName: "ReactiveAssignment",
    params: {
      field: "contract",
      effect: {
        expr: "undefined",
        override: true,
        autoClear: false,
        when: "!$current.createdOrg",
        fireImmediately: true,
      },
    },
    store: { description: "" },
  },
  {
    ruleId: "Old-Criteria-c7639f0d-4790-458a-b146-d5ad576c1368",
    actionIndex: 0,
    actionName: "ReactiveCriteria",
    params: {
      field: "contract",
      fragment: {
        criteriaStr: "settleCustomer =: settleCustomer",
        bindVars: { settleCustomer: "$current.settleCustomer.id" },
        autoClear: true,
        fireImmediately: true,
      },
    },
    store: { description: "" },
  },
  {
    ruleId: "Old-Criteria-c7639f0d-4790-458a-b146-d5ad576c1368",
    actionIndex: 1,
    actionName: "ReactiveAssignment",
    params: {
      field: "contract",
      effect: {
        expr: "undefined",
        override: true,
        autoClear: false,
        when: "!$current.settleCustomer",
        fireImmediately: true,
      },
    },
    store: { description: "" },
  },
  {
    ruleId: "Old-Criteria-02fb784c-f0b7-4cda-9554-4045d0efac29",
    actionIndex: 0,
    actionName: "ReactiveCriteria",
    params: {
      field: "contract",
      fragment: {
        criteriaStr: "createdOrg =: createdOrg",
        bindVars: { createdOrg: "$current.createdOrg.id" },
        autoClear: true,
        fireImmediately: true,
      },
    },
    store: { description: "" },
  },
  {
    ruleId: "Old-Criteria-02fb784c-f0b7-4cda-9554-4045d0efac29",
    actionIndex: 1,
    actionName: "ReactiveAssignment",
    params: {
      field: "contract",
      effect: {
        expr: "undefined",
        override: true,
        autoClear: false,
        when: "!$current.createdOrg",
        fireImmediately: true,
      },
    },
    store: { description: "" },
  },
  {
    ruleId: "Old-Criteria-77dff212-7782-4dfa-842f-8adec8659654",
    actionIndex: 0,
    actionName: "ReactiveCriteria",
    params: {
      field: "contract",
      fragment: {
        criteriaStr: "salesOrg=:salesOrg",
        bindVars: { salesOrg: "$current.salesOrg.id" },
        autoClear: true,
        fireImmediately: true,
      },
    },
    store: { description: "" },
  },
  {
    ruleId: "Old-Criteria-77dff212-7782-4dfa-842f-8adec8659654",
    actionIndex: 1,
    actionName: "ReactiveAssignment",
    params: {
      field: "contract",
      effect: {
        expr: "undefined",
        override: true,
        autoClear: false,
        when: "!$current.salesOrg",
        fireImmediately: true,
      },
    },
    store: { description: "" },
  },
  {
    ruleId: "Old-ImmutableCriteria-b18db3a1-4895-44bd-86e4-156f5bb7ecaf",
    actionIndex: 0,
    actionName: "ReactiveCriteria",
    params: {
      field: "revenueConfirmationDataType",
      fragment: {
        criteriaStr:
          "id in ('RevenueConfirmationDataType.adjust','RevenueConfirmationDataType.standard')",
        fireImmediately: true,
      },
    },
    store: { description: "" },
  },
  {
    ruleId: "Old-ImmutableCriteria-6878a9c9-8170-4444-886d-b55b2b55fe4f",
    actionIndex: 0,
    actionName: "ReactiveCriteria",
    params: {
      field: "contract",
      fragment: {
        criteriaStr: "isChangeBill = 'false'",
        fireImmediately: true,
      },
    },
    store: { description: "" },
  },
  {
    ruleId: "Old-ImmutableCriteria-a943b487-843b-4c4a-a76b-838fef80f682",
    actionIndex: 0,
    actionName: "ReactiveCriteria",
    params: {
      field: "contract",
      fragment: {
        criteriaStr:
          "accountingMethodId = 'AccountingMethod.revenueConfirmation'",
        fireImmediately: true,
      },
    },
    store: { description: "" },
  },
  {
    ruleId: "Old-ImmutableCriteria-d84e4aca-2e9b-4720-880e-b6b301368d25",
    actionIndex: 0,
    actionName: "ReactiveCriteria",
    params: {
      field: "contract",
      fragment: {
        criteriaStr:
          "(businessType.id != 'GW8GVT50KC00001' or executePath = 'ContractExecutePathEnum.direct') and ((isInitBill='t' and exists(select 1 from BusinessModuleOrgEnableView where businessModule.code='contract' and orgId='1U2VDW52DUM002M' and isInit=true)) or isInitBill='f')",
        fireImmediately: true,
      },
    },
    store: { description: "" },
  },
  {
    ruleId: "Old-ImmutableCriteria-928df4d7-4f73-4b2b-9b88-e4b6ec63c562",
    actionIndex: 0,
    actionName: "ReactiveCriteria",
    params: {
      field: "createdOrg",
      fragment: {
        criteriaStr:
          "id in (select orgId from BusinessModuleOrgEnable where businessModuleId in ('BusinessModule_ar') and isEnabled = 'true')",
        fireImmediately: true,
      },
    },
    store: { description: "" },
  },
  {
    ruleId: "Old-Status-728a8c16-7780-4600-8cab-17c9fc350964",
    actionIndex: 0,
    actionName: "ReactiveFieldStatus",
    params: {
      field: "billType",
      effect: { status: "Readonly", expr: true, fireImmediately: true },
    },
    store: { description: "" },
  },
  {
    ruleId: "Old-StatusChange-600fe25d-3eb7-4a71-a08c-4fced427289c",
    actionIndex: 0,
    actionName: "ReactiveFieldStatus",
    params: {
      field: "contact",
      effect: {
        status: "Readonly",
        expr: "!$current.customer",
        fireImmediately: true,
      },
    },
    store: { description: "" },
  },
  {
    ruleId: "Old-StatusChange-65718b9a-a935-4e97-ae61-c5fb606a842e",
    actionIndex: 0,
    actionName: "ReactiveFieldStatus",
    params: {
      field: "settlePartyBankAccount",
      effect: {
        status: "Readonly",
        expr: "!$current.settleCustomer",
        fireImmediately: true,
      },
    },
    store: { description: "" },
  },
  {
    ruleId: "Old-MasterToDetailsSync-a26b5067-0b68-491b-956e-25794860754f",
    actionIndex: 0,
    actionName: "ReactiveMasterToTables",
    params: {
      sourceValue: "$root.isPriceWithTax",
      targets: [
        {
          dataTable: "revenueConfirmationItems",
          field: "isPriceWithTax",
          viewName: "Initialized",
          when: "$root.isPriceWithTax",
        },
      ],
    },
    store: { description: "" },
  },
  {
    ruleId: "Old-MasterToDetailsSync-23c0ac54-6b04-439d-84f9-f64e9f2c3c5d",
    actionIndex: 0,
    actionName: "ReactiveMasterToTables",
    params: {
      sourceValue: "$root.currency",
      targets: [
        {
          dataTable: "revenueConfirmationItems",
          field: "currency",
          viewName: "Initialized",
          when: "$root.currency",
        },
      ],
    },
    store: { description: "" },
  },
  {
    ruleId: "Old-MasterToDetailsSync-5af642ca-f6c1-4f58-833e-c795863f9cec",
    actionIndex: 0,
    actionName: "ReactiveMasterToTables",
    params: {
      sourceValue: "$root.exchangeRate",
      targets: [
        {
          dataTable: "revenueConfirmationItems",
          field: "exchangeRate",
          viewName: "Initialized",
          when: "$root.exchangeRate",
        },
      ],
    },
    store: { description: "" },
  },
  {
    ruleId: "Old-MasterToDetailsSync-29c34044-a4bd-4737-a872-f86f9a6288f5",
    actionIndex: 0,
    actionName: "ReactiveMasterToTables",
    params: {
      sourceValue: "$root.revenueConfirmationDataType",
      targets: [
        {
          dataTable: "revenueConfirmationItems",
          field: "revenueConfirmationDataType",
          viewName: "Initialized",
          when: "true",
        },
      ],
    },
    store: { description: "" },
  },
  {
    ruleId: "Old-DetailsToMasterSync-a40b834b-3132-472e-9352-7569fa584cbf",
    actionIndex: 0,
    actionName: "ReactiveTablesToMaster",
    params: {
      field: "originAmount",
      clearFieldWhenDifferent: true,
      aggregationMethod: "Sum",
      sourceValues: [
        {
          dataTable: "revenueConfirmationItems",
          expr: "$current.originAmount",
          viewName: "Initialized",
        },
      ],
    },
    store: { description: "" },
  },
  {
    ruleId: "Old-DetailsToMasterSync-a40b834b-3132-472e-9352-7569fa584cbf",
    actionIndex: 1,
    actionName: "ReactiveTablesToMaster",
    params: {
      field: "amount",
      clearFieldWhenDifferent: true,
      aggregationMethod: "Sum",
      sourceValues: [
        {
          dataTable: "revenueConfirmationItems",
          expr: "$current.amount",
          viewName: "Initialized",
        },
      ],
    },
    store: { description: "" },
  },
  {
    ruleId: "Old-DetailsToMasterSync-a40b834b-3132-472e-9352-7569fa584cbf",
    actionIndex: 2,
    actionName: "ReactiveTablesToMaster",
    params: {
      field: "amountWithoutTax",
      clearFieldWhenDifferent: true,
      aggregationMethod: "Sum",
      sourceValues: [
        {
          dataTable: "revenueConfirmationItems",
          expr: "$current.amountWithoutTax",
          viewName: "Initialized",
        },
      ],
    },
    store: { description: "" },
  },
  {
    ruleId: "Old-DetailsToMasterSync-a40b834b-3132-472e-9352-7569fa584cbf",
    actionIndex: 3,
    actionName: "ReactiveTablesToMaster",
    params: {
      field: "originAmountWithoutTax",
      clearFieldWhenDifferent: true,
      aggregationMethod: "Sum",
      sourceValues: [
        {
          dataTable: "revenueConfirmationItems",
          expr: "$current.originAmountWithoutTax",
          viewName: "Initialized",
        },
      ],
    },
    store: { description: "" },
  },
  {
    ruleId: "Old-DetailsToMasterSync-a40b834b-3132-472e-9352-7569fa584cbf",
    actionIndex: 4,
    actionName: "ReactiveTablesToMaster",
    params: {
      field: "receiptAmount",
      clearFieldWhenDifferent: true,
      aggregationMethod: "Sum",
      sourceValues: [
        {
          dataTable: "revenueConfirmationItems",
          expr: "$current.receiptAmount",
          viewName: "Initialized",
        },
      ],
    },
    store: { description: "" },
  },
  {
    ruleId: "Old-DetailsToMasterSync-a40b834b-3132-472e-9352-7569fa584cbf",
    actionIndex: 5,
    actionName: "ReactiveTablesToMaster",
    params: {
      field: "originReceiptAmount",
      clearFieldWhenDifferent: true,
      aggregationMethod: "Sum",
      sourceValues: [
        {
          dataTable: "revenueConfirmationItems",
          expr: "$current.originReceiptAmount",
          viewName: "Initialized",
        },
      ],
    },
    store: { description: "" },
  },
  {
    ruleId: "Old-DetailsToMasterSync-a40b834b-3132-472e-9352-7569fa584cbf",
    actionIndex: 6,
    actionName: "ReactiveTablesToMaster",
    params: {
      field: "taxAmount",
      clearFieldWhenDifferent: true,
      aggregationMethod: "Sum",
      sourceValues: [
        {
          dataTable: "revenueConfirmationItems",
          expr: "$current.taxAmount",
          viewName: "Initialized",
        },
      ],
    },
    store: { description: "" },
  },
  {
    ruleId: "Old-DetailsToMasterSync-a40b834b-3132-472e-9352-7569fa584cbf",
    actionIndex: 7,
    actionName: "ReactiveTablesToMaster",
    params: {
      field: "originTaxAmount",
      clearFieldWhenDifferent: true,
      aggregationMethod: "Sum",
      sourceValues: [
        {
          dataTable: "revenueConfirmationItems",
          expr: "$current.originTaxAmount",
          viewName: "Initialized",
        },
      ],
    },
    store: { description: "" },
  },
  {
    ruleId: "Old-Validator-5bb9d182-a414-4256-8499-1e9ff5817f0a",
    actionIndex: 0,
    actionName: "ReactiveFieldValidator",
    params: {
      field: "businessDate",
      effect: {
        name: "min",
        params: {
          includeEquals: true,
          message: "业务日期 必须大于等于模块启用日期",
          min: 1635696000000,
        },
        isStruct: true,
        fireImmediately: true,
      },
    },
    store: { description: "" },
  },
  {
    ruleId: "ImmutableCriteria-",
    actionIndex: 0,
    actionName: "ReactiveCriteria",
    params: {
      field: "webEditTemplate",
      fragment: { criteriaStr: "id in ('dp3DeFzWR')", fireImmediately: true },
    },
    store: { description: "" },
  },
  {
    ruleId: "ImmutableCriteria-e12ce97c-4abc-4991-bef3-11f93c742163",
    actionIndex: 0,
    actionName: "ReactiveCriteria",
    params: {
      field: "invoiceType",
      fragment: { criteriaStr: "isOutput=true", fireImmediately: true },
    },
    store: { description: "" },
  },
  {
    ruleId: "Carry-6eceb132-d965-44a3-bad0-4a1898242d98",
    actionIndex: 0,
    actionName: "ReactiveAssignment",
    params: {
      field: "isPriceWithTax",
      effect: {
        expr: "$current.customer.isPriceWithTax",
        override: false,
        autoClear: false,
        fireImmediately: true,
      },
    },
    store: { description: "" },
  },
  {
    ruleId: "Carry-12b6a645-ae3d-4733-a684-ac87d714387b",
    actionIndex: 0,
    actionName: "ReactiveAssignment",
    params: {
      field: "primaryContact",
      effect: {
        expr: "$current.customer.contact",
        override: false,
        autoClear: true,
        fireImmediately: true,
      },
    },
    store: { description: "" },
  },
  {
    ruleId: "Carry-5a2a1bc8-e16e-4fdb-bd30-e6a586b3a6ab",
    actionIndex: 0,
    actionName: "ReactiveAssignment",
    params: {
      field: "settlePartyBankAccount",
      effect: {
        expr: "$current.customer.defaultBankAccount",
        override: false,
        autoClear: false,
        fireImmediately: true,
      },
    },
    store: { description: "" },
  },
  {
    ruleId: "Carry-67677fad-396a-4d03-b0d3-4fd1c359c9c2",
    actionIndex: 0,
    actionName: "ReactiveAssignment",
    params: {
      field: "customer",
      effect: {
        expr: "$current.project.customer",
        override: false,
        autoClear: false,
        fireImmediately: true,
      },
    },
    store: { description: "" },
  },
  {
    ruleId: "Carry-",
    actionIndex: 0,
    actionName: "ReactiveAssignment",
    params: {
      field: "$context.businessDate",
      effect: {
        expr: "$current.businessDate",
        override: false,
        autoClear: false,
        fireImmediately: true,
      },
    },
    store: { description: "" },
  },
  {
    ruleId: "Criteria-ContextRoleRelationShip-0",
    actionIndex: 0,
    actionName: "ReactiveCriteria",
    params: {
      field: "salesOrg",
      fragment: {
        criteriaStr:
          "(m.id=:createdOrgId or exists (select 1 from PartyDelegateRelationship where relationshipTypeId in ('SalesAccountingDelegateRelationship')and fromPartyId=m.id and toPartyId=:createdOrgId  and isDisabled=false))",
        bindVars: { createdOrgId: "$current.createdOrg.id" },
        when: "!!$current.createdOrg.id",
        fireImmediately: true,
      },
    },
    store: { description: "" },
  },
  {
    ruleId: "Criteria-ContextRoleRelationShip-1",
    actionIndex: 0,
    actionName: "ReactiveCriteria",
    params: {
      field: "projectOrg",
      fragment: {
        criteriaStr:
          "(m.id=:salesOrgId or exists (select 1 from PartyDelegateRelationship where relationshipTypeId in ('SalesProjectDelegateRelationship')and toPartyId=m.id and fromPartyId=:salesOrgId  and isDisabled=false))",
        bindVars: { salesOrgId: "$current.salesOrg.id" },
        when: "(!!$current.project.id) && (!!$current.salesOrg.id)",
        fireImmediately: true,
      },
    },
    store: { description: "" },
  },
  {
    ruleId: "19dcb83f-caca-42a6-bf79-b64463b03994",
    actionIndex: 0,
    actionName: "ReactiveFieldStatus",
    params: {
      effect: {
        expr: "!$fn.isCarryFieldVisible('name', $current.contract)",
        fireImmediately: "true",
        status: "Sensitive",
      },
      field: "contract.name",
    },
    store: { description: "外键携带字段，根据外键控制敏感属性" },
  },
  {
    ruleId: "layerhidden_billIoType",
    actionIndex: 0,
    actionName: "ReactiveFieldStatus",
    params: {
      field: "billIoType",
      effect: { status: "Visible", expr: false, fireImmediately: true },
    },
    store: { description: "" },
  },
  {
    ruleId: "layerhidden_dataVersion",
    actionIndex: 0,
    actionName: "ReactiveFieldStatus",
    params: {
      field: "dataVersion",
      effect: { status: "Visible", expr: false, fireImmediately: true },
    },
    store: { description: "" },
  },
  {
    ruleId: "layerhidden_finishedTime",
    actionIndex: 0,
    actionName: "ReactiveFieldStatus",
    params: {
      field: "finishedTime",
      effect: { status: "Visible", expr: false, fireImmediately: true },
    },
    store: { description: "" },
  },
  {
    ruleId: "layerhidden_finishedReason",
    actionIndex: 0,
    actionName: "ReactiveFieldStatus",
    params: {
      field: "finishedReason",
      effect: { status: "Visible", expr: false, fireImmediately: true },
    },
    store: { description: "" },
  },
  {
    ruleId: "layerhidden_closedTime",
    actionIndex: 0,
    actionName: "ReactiveFieldStatus",
    params: {
      field: "closedTime",
      effect: { status: "Visible", expr: false, fireImmediately: true },
    },
    store: { description: "" },
  },
  {
    ruleId: "layerhidden_closedReason",
    actionIndex: 0,
    actionName: "ReactiveFieldStatus",
    params: {
      field: "closedReason",
      effect: { status: "Visible", expr: false, fireImmediately: true },
    },
    store: { description: "" },
  },
  {
    ruleId: "layerhidden_isSuspended",
    actionIndex: 0,
    actionName: "ReactiveFieldStatus",
    params: {
      field: "isSuspended",
      effect: { status: "Visible", expr: false, fireImmediately: true },
    },
    store: { description: "" },
  },
  {
    ruleId: "layerhidden_suspendedTime",
    actionIndex: 0,
    actionName: "ReactiveFieldStatus",
    params: {
      field: "suspendedTime",
      effect: { status: "Visible", expr: false, fireImmediately: true },
    },
    store: { description: "" },
  },
  {
    ruleId: "layerhidden_suspendedReason",
    actionIndex: 0,
    actionName: "ReactiveFieldStatus",
    params: {
      field: "suspendedReason",
      effect: { status: "Visible", expr: false, fireImmediately: true },
    },
    store: { description: "" },
  },
  {
    ruleId: "layerhidden_isManualCode",
    actionIndex: 0,
    actionName: "ReactiveFieldStatus",
    params: {
      field: "isManualCode",
      effect: { status: "Visible", expr: false, fireImmediately: true },
    },
    store: { description: "" },
  },
  {
    ruleId: "layerhidden_finishedUser",
    actionIndex: 0,
    actionName: "ReactiveFieldStatus",
    params: {
      field: "finishedUser",
      effect: { status: "Visible", expr: false, fireImmediately: true },
    },
    store: { description: "" },
  },
  {
    ruleId: "layerhidden_suspendedUser",
    actionIndex: 0,
    actionName: "ReactiveFieldStatus",
    params: {
      field: "suspendedUser",
      effect: { status: "Visible", expr: false, fireImmediately: true },
    },
    store: { description: "" },
  },
  {
    ruleId: "layerhidden_srcObject",
    actionIndex: 0,
    actionName: "ReactiveFieldStatus",
    params: {
      field: "srcObject",
      effect: { status: "Visible", expr: false, fireImmediately: true },
    },
    store: { description: "" },
  },
  {
    ruleId: "layerhidden_srcObjectObjectData",
    actionIndex: 0,
    actionName: "ReactiveFieldStatus",
    params: {
      field: "srcObjectObjectData",
      effect: { status: "Visible", expr: false, fireImmediately: true },
    },
    store: { description: "" },
  },
  {
    ruleId: "layerhidden_blueBill",
    actionIndex: 0,
    actionName: "ReactiveFieldStatus",
    params: {
      field: "blueBill",
      effect: { status: "Visible", expr: false, fireImmediately: true },
    },
    store: { description: "" },
  },
  {
    ruleId: "layerhidden_srcObject.businessDate",
    actionIndex: 0,
    actionName: "ReactiveFieldStatus",
    params: {
      field: "srcObject.businessDate",
      effect: { status: "Visible", expr: false, fireImmediately: true },
    },
    store: { description: "" },
  },
  {
    ruleId: "layerhidden_srcObject.billType",
    actionIndex: 0,
    actionName: "ReactiveFieldStatus",
    params: {
      field: "srcObject.billType",
      effect: { status: "Visible", expr: false, fireImmediately: true },
    },
    store: { description: "" },
  },
  {
    ruleId: "layerhidden_srcObject.code",
    actionIndex: 0,
    actionName: "ReactiveFieldStatus",
    params: {
      field: "srcObject.code",
      effect: { status: "Visible", expr: false, fireImmediately: true },
    },
    store: { description: "" },
  },
  {
    ruleId: "OrgRoleTypeIds-503daae2-3d86-4e5d-b246-9db6ce0d4ad9",
    actionIndex: 0,
    actionName: "ReactiveFieldComponentProps",
    params: {
      field: "createdOrg",
      effect: {
        props: { orgRoleTypeIds: ["FinancialOrg"] },
        isDestruct: false,
        when: "true",
        fireImmediately: true,
      },
    },
    store: { description: "", reference: "revenueConfirmationItems" },
  },
  {
    ruleId: "OrgRoleTypeIds-f719dec0-b4b0-4690-a82d-ad229878fe7a",
    actionIndex: 0,
    actionName: "ReactiveFieldComponentProps",
    params: {
      field: "projectOrg",
      effect: {
        props: { orgRoleTypeIds: ["ProjectOrg"] },
        isDestruct: false,
        when: "true",
        fireImmediately: true,
      },
    },
    store: { description: "", reference: "revenueConfirmationItems" },
  },
  {
    ruleId: "QueryContext-d39adc47-2111-410e-994c-692727f674ab",
    actionIndex: 0,
    actionName: "ReactiveFieldComponentProps",
    params: {
      field: "project",
      effects: [
        {
          props: { contextOrgIds: "[$root.createdOrg.id]" },
          isDestruct: false,
          when: "$root.createdOrg.id",
          fireImmediately: true,
        },
      ],
    },
    store: { description: "", reference: "revenueConfirmationItems" },
  },
  {
    ruleId: "QueryContext-d39adc47-2111-410e-994c-692727f674ab",
    actionIndex: 1,
    actionName: "ReactiveFieldComponentProps",
    params: {
      field: "product",
      effects: [
        {
          props: { contextOrgIds: "[$root.createdOrg.id]" },
          isDestruct: false,
          when: "$root.createdOrg.id",
          fireImmediately: true,
        },
        {
          props: { "contextRoleOrgIds.FinancialOrg": "$root.createdOrg.id" },
          isDestruct: true,
          when: "$root.createdOrg.id",
          fireImmediately: true,
        },
        {
          props: { "contextRoleOrgIds.SalesOrg": "$root.salesOrg.id" },
          isDestruct: true,
          when: "$root.salesOrg.id",
          fireImmediately: true,
        },
      ],
    },
    store: { description: "", reference: "revenueConfirmationItems" },
  },
  {
    ruleId: "QueryContext-d39adc47-2111-410e-994c-692727f674ab",
    actionIndex: 2,
    actionName: "ReactiveFieldComponentProps",
    params: {
      field: "revenue",
      effects: [
        {
          props: { contextOrgIds: "[$root.createdOrg.id]" },
          isDestruct: false,
          when: "$root.createdOrg.id",
          fireImmediately: true,
        },
      ],
    },
    store: { description: "", reference: "revenueConfirmationItems" },
  },
  {
    ruleId: "TaxRatePrecisionControl-revenueConfirmationItems-taxRate",
    actionIndex: 0,
    actionName: "ReactiveFieldComponentProps",
    params: {
      field: "taxRate",
      effect: {
        props: { "numericProps.decimalPlaces": 2 },
        isDestruct: true,
        fireImmediately: true,
      },
    },
    store: { description: "", reference: "revenueConfirmationItems" },
  },
  {
    ruleId: "layerhidden_revenueConfirmationItems.srcObject",
    actionIndex: 0,
    actionName: "ReactiveFieldStatus",
    params: {
      field: "srcObject",
      effect: { status: "Visible", expr: false, fireImmediately: true },
    },
    store: { description: "", reference: "revenueConfirmationItems" },
  },
  {
    ruleId: "layerhidden_revenueConfirmationItems.srcItemObjectTypeObject",
    actionIndex: 0,
    actionName: "ReactiveFieldStatus",
    params: {
      field: "srcItemObjectTypeObject",
      effect: { status: "Visible", expr: false, fireImmediately: true },
    },
    store: { description: "", reference: "revenueConfirmationItems" },
  },
  {
    ruleId: "af0f185b-00bb-4f68-a554-8fd03723fb8d",
    actionIndex: 0,
    actionName: "ReactiveAssignment",
    params: {
      effects: [
        {
          autoClear: false,
          expr: "undefined",
          fireImmediately: true,
          when: "!$current.project",
        },
      ],
      field: "projectOrg",
    },
    store: {
      description: "无【项目】时，【项目组织】不可选。",
      condition: { if: "$context.isEnabledMultiOrg === true" },
    },
  },
  {
    ruleId: "ab0cc076-1169-4af4-977f-8f2ca08593a4",
    actionIndex: 0,
    actionName: "Assignment",
    params: { expr: "$root.project", field: "project" },
    store: {
      description: "表体初始化默认值",
      reference: "revenueConfirmationItems",
      condition: {
        if: "!$current.srcItemObjectId && $root.project && !$current.project",
      },
    },
  },
  {
    ruleId: "qtyValueTax-input-currency",
    actionIndex: 0,
    actionName: "Assignment",
    params: { expr: "'currency'", field: "$variable.qtyValueTaxCurrentField" },
    store: {
      trigger: { event: "Change", target: "$current.currency" },
      description: "修改 币种",
      inTransaction: true,
      reference: "revenueConfirmationItems",
      condition: { access: "'currency'" },
    },
  },
  {
    ruleId: "qtyValueTax-input-currency",
    actionIndex: 1,
    actionName: "Assignment",
    params: {
      expr: "$variable.qtyValueTaxInitParams",
      field: "$variable.qtyValueTaxParams",
    },
    store: {
      trigger: { event: "Change", target: "$current.currency" },
      description: "修改 币种",
      inTransaction: true,
      reference: "revenueConfirmationItems",
      condition: { access: "'currency'" },
    },
  },
  {
    ruleId: "qtyValueTax-input-exchangeRate",
    actionIndex: 0,
    actionName: "Assignment",
    params: {
      expr: "'exchangeRate'",
      field: "$variable.qtyValueTaxCurrentField",
    },
    store: {
      trigger: { event: "Change", target: "$current.exchangeRate" },
      description: "修改 汇率",
      inTransaction: true,
      reference: "revenueConfirmationItems",
      condition: {
        access: "'exchangeRate'",
        if: "!$fn.writeExchangeRate($current.calcBaseHigh)",
      },
    },
  },
  {
    ruleId: "qtyValueTax-input-exchangeRate",
    actionIndex: 1,
    actionName: "Assignment",
    params: {
      expr: "$variable.qtyValueTaxInitParams",
      field: "$variable.qtyValueTaxParams",
    },
    store: {
      trigger: { event: "Change", target: "$current.exchangeRate" },
      description: "修改 汇率",
      inTransaction: true,
      reference: "revenueConfirmationItems",
      condition: {
        access: "'exchangeRate'",
        if: "!$fn.writeExchangeRate($current.calcBaseHigh)",
      },
    },
  },
  {
    ruleId: "qtyValueTax-output-exchangeRate",
    actionIndex: 0,
    actionName: "ReactiveAssignment",
    params: {
      effects: [
        {
          autoClear: true,
          expr: "$variable.qtyValueTaxResult.exchangeRate",
          isWhenTracked: false,
          override: true,
          when: "$fn.writeExchangeRate($current.calcBaseHigh)",
        },
      ],
      field: "exchangeRate",
    },
    store: {
      description: "回写 汇率",
      reference: "revenueConfirmationItems",
      condition: { access: "'exchangeRate'" },
    },
  },
  {
    ruleId: "qtyValueTax-input-taxRate",
    actionIndex: 0,
    actionName: "Assignment",
    params: { expr: "'taxRate'", field: "$variable.qtyValueTaxCurrentField" },
    store: {
      trigger: { event: "Change", target: "$current.taxRate" },
      description: "录入 税率",
      inTransaction: true,
      reference: "revenueConfirmationItems",
      condition: { access: "'taxRate'" },
    },
  },
  {
    ruleId: "qtyValueTax-input-taxRate",
    actionIndex: 1,
    actionName: "Assignment",
    params: {
      expr: "$fn.getQtyValueTaxParams('TAX_RATE', '', $current.calcBase, $current.calcBaseHigh, $variable.taxRate, $variable.transQty, $variable.originPrice, $variable.price, $variable.originPriceWithoutTax, $variable.priceWithoutTax, $current.originAmount, $current.amount, $variable.originAmountWithoutTax, $variable.amountWithoutTax, $variable.originTaxAmount, $variable.taxAmount)",
      field: "$variable.qtyValueTaxParams",
    },
    store: {
      trigger: { event: "Change", target: "$current.taxRate" },
      description: "录入 税率",
      inTransaction: true,
      reference: "revenueConfirmationItems",
      condition: { access: "'taxRate'" },
    },
  },
  {
    ruleId: "qtyValueTax-transQty-calcBase",
    actionIndex: 0,
    actionName: "Assignment",
    params: {
      expr: "$fn.changeQtyCalcBase($current.calcBase, $variable.originPrice, $variable.price, $variable.originPriceWithoutTax, $variable.priceWithoutTax)",
      field: "$variable.qtyValueTaxTempCalcBase",
    },
    store: {
      trigger: { event: "Focus", target: "$current.quantity" },
      description: "录入数量 计算标志位特殊处理",
      reference: "revenueConfirmationItems",
      condition: { access: "'quantity'", if: "$current.quantity.$focused" },
    },
  },
  {
    ruleId: "qtyValueTax-input-transQty",
    actionIndex: 0,
    actionName: "Assignment",
    params: { expr: "'transQty'", field: "$variable.qtyValueTaxCurrentField" },
    store: {
      trigger: { event: "Change", target: "$current.quantity" },
      description: "录入 数量",
      inTransaction: true,
      reference: "revenueConfirmationItems",
      condition: { access: "'quantity'", if: "$current.quantity.$focused" },
    },
  },
  {
    ruleId: "qtyValueTax-input-transQty",
    actionIndex: 1,
    actionName: "Assignment",
    params: {
      expr: "$fn.getQtyValueTaxParams('QTY', 'QTY_SEG_OFFSET', $variable.qtyValueTaxTempCalcBase, $current.calcBaseHigh, $variable.taxRate, $variable.transQty, $variable.originPrice, $variable.price, $variable.originPriceWithoutTax, $variable.priceWithoutTax, $current.originAmount, $current.amount, $variable.originAmountWithoutTax, $variable.amountWithoutTax, $variable.originTaxAmount, $variable.taxAmount)",
      field: "$variable.qtyValueTaxParams",
    },
    store: {
      trigger: { event: "Change", target: "$current.quantity" },
      description: "录入 数量",
      inTransaction: true,
      reference: "revenueConfirmationItems",
      condition: { access: "'quantity'", if: "$current.quantity.$focused" },
    },
  },
  {
    ruleId: "qtyValueTax-output-transQty",
    actionIndex: 0,
    actionName: "ReactiveAssignment",
    params: {
      effects: [
        {
          autoClear: true,
          expr: "$variable.qtyValueTaxResult.transQty",
          isWhenTracked: false,
          override: true,
          when: "$fn.needWriteBack($variable.qtyValueTaxCurrentField, $current.quantity.$focused, $variable.qtyValueTaxParams.transQty, $variable.qtyValueTaxResult.transQty)",
        },
      ],
      field: "quantity",
    },
    store: {
      description: "回写 数量",
      reference: "revenueConfirmationItems",
      condition: { access: "'quantity'" },
    },
  },
  {
    ruleId: "qtyValueTax-input-originPrice",
    actionIndex: 0,
    actionName: "Assignment",
    params: {
      expr: "'originPrice'",
      field: "$variable.qtyValueTaxCurrentField",
    },
    store: {
      trigger: { event: "Change", target: "$current.originPrice" },
      description: "录入 原币含税单价",
      inTransaction: true,
      reference: "revenueConfirmationItems",
      condition: {
        access: "'originPrice'",
        if: "$current.originPrice.$focused",
      },
    },
  },
  {
    ruleId: "qtyValueTax-input-originPrice",
    actionIndex: 1,
    actionName: "Assignment",
    params: {
      expr: "$fn.getQtyValueTaxParams('PRICE', 'ZERO', $current.calcBase, $current.calcBaseHigh, $variable.taxRate, $variable.transQty, $variable.originPrice, $variable.price, $variable.originPriceWithoutTax, $variable.priceWithoutTax, $current.originAmount, $current.amount, $variable.originAmountWithoutTax, $variable.amountWithoutTax, $variable.originTaxAmount, $variable.taxAmount)",
      field: "$variable.qtyValueTaxParams",
    },
    store: {
      trigger: { event: "Change", target: "$current.originPrice" },
      description: "录入 原币含税单价",
      inTransaction: true,
      reference: "revenueConfirmationItems",
      condition: {
        access: "'originPrice'",
        if: "$current.originPrice.$focused",
      },
    },
  },
  {
    ruleId: "qtyValueTax-input-originPrice",
    actionIndex: 2,
    actionName: "Assignment",
    params: { expr: "true", field: "isPriceWithTax", when: "'isPriceWithTax'" },
    store: {
      trigger: { event: "Change", target: "$current.originPrice" },
      description: "录入 原币含税单价",
      inTransaction: true,
      reference: "revenueConfirmationItems",
      condition: {
        access: "'originPrice'",
        if: "$current.originPrice.$focused",
      },
    },
  },
  {
    ruleId: "qtyValueTax-output-originPrice",
    actionIndex: 0,
    actionName: "ReactiveAssignment",
    params: {
      effects: [
        {
          autoClear: true,
          expr: "$variable.qtyValueTaxResult.originPrice",
          isWhenTracked: false,
          override: true,
          when: "$fn.needWriteBack($variable.qtyValueTaxCurrentField, $current.originPrice.$focused, $variable.qtyValueTaxParams.originPrice, $variable.qtyValueTaxResult.originPrice)",
        },
      ],
      field: "originPrice",
    },
    store: {
      description: "回写 原币含税单价",
      reference: "revenueConfirmationItems",
      condition: { access: "'originPrice'" },
    },
  },
  {
    ruleId: "qtyValueTax-input-price",
    actionIndex: 0,
    actionName: "Assignment",
    params: { expr: "'price'", field: "$variable.qtyValueTaxCurrentField" },
    store: {
      trigger: { event: "Change", target: "$current.price" },
      description: "录入 本币含税单价",
      inTransaction: true,
      reference: "revenueConfirmationItems",
      condition: { access: "'price'", if: "$current.price.$focused" },
    },
  },
  {
    ruleId: "qtyValueTax-input-price",
    actionIndex: 1,
    actionName: "Assignment",
    params: {
      expr: "$fn.getQtyValueTaxParams('PRICE', 'LOCAL_SEG_OFFSET', $current.calcBase, $current.calcBaseHigh, $variable.taxRate, $variable.transQty, $variable.originPrice, $variable.price, $variable.originPriceWithoutTax, $variable.priceWithoutTax, $current.originAmount, $current.amount, $variable.originAmountWithoutTax, $variable.amountWithoutTax, $variable.originTaxAmount, $variable.taxAmount)",
      field: "$variable.qtyValueTaxParams",
    },
    store: {
      trigger: { event: "Change", target: "$current.price" },
      description: "录入 本币含税单价",
      inTransaction: true,
      reference: "revenueConfirmationItems",
      condition: { access: "'price'", if: "$current.price.$focused" },
    },
  },
  {
    ruleId: "qtyValueTax-input-price",
    actionIndex: 2,
    actionName: "Assignment",
    params: { expr: "true", field: "isPriceWithTax", when: "'isPriceWithTax'" },
    store: {
      trigger: { event: "Change", target: "$current.price" },
      description: "录入 本币含税单价",
      inTransaction: true,
      reference: "revenueConfirmationItems",
      condition: { access: "'price'", if: "$current.price.$focused" },
    },
  },
  {
    ruleId: "qtyValueTax-output-price",
    actionIndex: 0,
    actionName: "ReactiveAssignment",
    params: {
      effects: [
        {
          autoClear: true,
          expr: "$variable.qtyValueTaxResult.price",
          isWhenTracked: false,
          override: true,
          when: "$fn.needWriteBack($variable.qtyValueTaxCurrentField, $current.price.$focused, $variable.qtyValueTaxParams.price, $variable.qtyValueTaxResult.price)",
        },
      ],
      field: "price",
    },
    store: {
      description: "回写 本币含税单价",
      reference: "revenueConfirmationItems",
      condition: { access: "'price'" },
    },
  },
  {
    ruleId: "qtyValueTax-input-originPriceWithoutTax",
    actionIndex: 0,
    actionName: "Assignment",
    params: {
      expr: "'originPriceWithoutTax'",
      field: "$variable.qtyValueTaxCurrentField",
    },
    store: {
      trigger: { event: "Change", target: "$current.originPriceWithoutTax" },
      description: "录入 原币无税单价",
      inTransaction: true,
      reference: "revenueConfirmationItems",
      condition: {
        access: "'originPriceWithoutTax'",
        if: "$current.originPriceWithoutTax.$focused",
      },
    },
  },
  {
    ruleId: "qtyValueTax-input-originPriceWithoutTax",
    actionIndex: 1,
    actionName: "Assignment",
    params: {
      expr: "$fn.getQtyValueTaxParams('PRICE_WITHOUT_TAX', 'ZERO', $current.calcBase, $current.calcBaseHigh, $variable.taxRate, $variable.transQty, $variable.originPrice, $variable.price, $variable.originPriceWithoutTax, $variable.priceWithoutTax, $current.originAmount, $current.amount, $variable.originAmountWithoutTax, $variable.amountWithoutTax, $variable.originTaxAmount, $variable.taxAmount)",
      field: "$variable.qtyValueTaxParams",
    },
    store: {
      trigger: { event: "Change", target: "$current.originPriceWithoutTax" },
      description: "录入 原币无税单价",
      inTransaction: true,
      reference: "revenueConfirmationItems",
      condition: {
        access: "'originPriceWithoutTax'",
        if: "$current.originPriceWithoutTax.$focused",
      },
    },
  },
  {
    ruleId: "qtyValueTax-input-originPriceWithoutTax",
    actionIndex: 2,
    actionName: "Assignment",
    params: {
      expr: "false",
      field: "isPriceWithTax",
      when: "'isPriceWithTax'",
    },
    store: {
      trigger: { event: "Change", target: "$current.originPriceWithoutTax" },
      description: "录入 原币无税单价",
      inTransaction: true,
      reference: "revenueConfirmationItems",
      condition: {
        access: "'originPriceWithoutTax'",
        if: "$current.originPriceWithoutTax.$focused",
      },
    },
  },
  {
    ruleId: "qtyValueTax-output-originPriceWithoutTax",
    actionIndex: 0,
    actionName: "ReactiveAssignment",
    params: {
      effects: [
        {
          autoClear: true,
          expr: "$variable.qtyValueTaxResult.originPriceWithoutTax",
          isWhenTracked: false,
          override: true,
          when: "$fn.needWriteBack($variable.qtyValueTaxCurrentField, $current.originPriceWithoutTax.$focused, $variable.qtyValueTaxParams.originPriceWithoutTax, $variable.qtyValueTaxResult.originPriceWithoutTax)",
        },
      ],
      field: "originPriceWithoutTax",
    },
    store: {
      description: "回写 原币无税单价",
      reference: "revenueConfirmationItems",
      condition: { access: "'originPriceWithoutTax'" },
    },
  },
  {
    ruleId: "qtyValueTax-input-priceWithoutTax",
    actionIndex: 0,
    actionName: "Assignment",
    params: {
      expr: "'priceWithoutTax'",
      field: "$variable.qtyValueTaxCurrentField",
    },
    store: {
      trigger: { event: "Change", target: "$current.priceWithoutTax" },
      description: "录入 本币无税单价",
      inTransaction: true,
      reference: "revenueConfirmationItems",
      condition: {
        access: "'priceWithoutTax'",
        if: "$current.priceWithoutTax.$focused",
      },
    },
  },
  {
    ruleId: "qtyValueTax-input-priceWithoutTax",
    actionIndex: 1,
    actionName: "Assignment",
    params: {
      expr: "$fn.getQtyValueTaxParams('PRICE_WITHOUT_TAX', 'LOCAL_SEG_OFFSET', $current.calcBase, $current.calcBaseHigh, $variable.taxRate, $variable.transQty, $variable.originPrice, $variable.price, $variable.originPriceWithoutTax, $variable.priceWithoutTax, $current.originAmount, $current.amount, $variable.originAmountWithoutTax, $variable.amountWithoutTax, $variable.originTaxAmount, $variable.taxAmount)",
      field: "$variable.qtyValueTaxParams",
    },
    store: {
      trigger: { event: "Change", target: "$current.priceWithoutTax" },
      description: "录入 本币无税单价",
      inTransaction: true,
      reference: "revenueConfirmationItems",
      condition: {
        access: "'priceWithoutTax'",
        if: "$current.priceWithoutTax.$focused",
      },
    },
  },
  {
    ruleId: "qtyValueTax-input-priceWithoutTax",
    actionIndex: 2,
    actionName: "Assignment",
    params: {
      expr: "false",
      field: "isPriceWithTax",
      when: "'isPriceWithTax'",
    },
    store: {
      trigger: { event: "Change", target: "$current.priceWithoutTax" },
      description: "录入 本币无税单价",
      inTransaction: true,
      reference: "revenueConfirmationItems",
      condition: {
        access: "'priceWithoutTax'",
        if: "$current.priceWithoutTax.$focused",
      },
    },
  },
  {
    ruleId: "qtyValueTax-output-priceWithoutTax",
    actionIndex: 0,
    actionName: "ReactiveAssignment",
    params: {
      effects: [
        {
          autoClear: true,
          expr: "$variable.qtyValueTaxResult.priceWithoutTax",
          isWhenTracked: false,
          override: true,
          when: "$fn.needWriteBack($variable.qtyValueTaxCurrentField, $current.priceWithoutTax.$focused, $variable.qtyValueTaxParams.priceWithoutTax, $variable.qtyValueTaxResult.priceWithoutTax)",
        },
      ],
      field: "priceWithoutTax",
    },
    store: {
      description: "回写 本币无税单价",
      reference: "revenueConfirmationItems",
      condition: { access: "'priceWithoutTax'" },
    },
  },
  {
    ruleId: "qtyValueTax-input-originAmount",
    actionIndex: 0,
    actionName: "Assignment",
    params: {
      expr: "'originAmount'",
      field: "$variable.qtyValueTaxCurrentField",
    },
    store: {
      trigger: { event: "Change", target: "$current.originAmount" },
      description: "录入 原币价税合计",
      inTransaction: true,
      reference: "revenueConfirmationItems",
      condition: {
        access: "'originAmount'",
        if: "$current.originAmount.$focused",
      },
    },
  },
  {
    ruleId: "qtyValueTax-input-originAmount",
    actionIndex: 1,
    actionName: "Assignment",
    params: {
      expr: "$fn.getQtyValueTaxParams('AMOUNT', 'ZERO', $current.calcBase, $current.calcBaseHigh, $variable.taxRate, $variable.transQty, $variable.originPrice, $variable.price, $variable.originPriceWithoutTax, $variable.priceWithoutTax, $current.originAmount, $current.amount, $variable.originAmountWithoutTax, $variable.amountWithoutTax, $variable.originTaxAmount, $variable.taxAmount)",
      field: "$variable.qtyValueTaxParams",
    },
    store: {
      trigger: { event: "Change", target: "$current.originAmount" },
      description: "录入 原币价税合计",
      inTransaction: true,
      reference: "revenueConfirmationItems",
      condition: {
        access: "'originAmount'",
        if: "$current.originAmount.$focused",
      },
    },
  },
  {
    ruleId: "qtyValueTax-input-originAmount",
    actionIndex: 2,
    actionName: "Assignment",
    params: { expr: "true", field: "isPriceWithTax", when: "'isPriceWithTax'" },
    store: {
      trigger: { event: "Change", target: "$current.originAmount" },
      description: "录入 原币价税合计",
      inTransaction: true,
      reference: "revenueConfirmationItems",
      condition: {
        access: "'originAmount'",
        if: "$current.originAmount.$focused",
      },
    },
  },
  {
    ruleId: "qtyValueTax-output-originAmount",
    actionIndex: 0,
    actionName: "ReactiveAssignment",
    params: {
      effects: [
        {
          autoClear: true,
          expr: "$variable.qtyValueTaxResult.originAmount",
          isWhenTracked: false,
          override: true,
          when: "$fn.needWriteBack($variable.qtyValueTaxCurrentField, $current.originAmount.$focused, $variable.qtyValueTaxParams.originAmount, $variable.qtyValueTaxResult.originAmount)",
        },
      ],
      field: "originAmount",
    },
    store: {
      description: "回写 原币价税合计",
      reference: "revenueConfirmationItems",
      condition: { access: "'originAmount'" },
    },
  },
  {
    ruleId: "qtyValueTax-input-amount",
    actionIndex: 0,
    actionName: "Assignment",
    params: { expr: "'amount'", field: "$variable.qtyValueTaxCurrentField" },
    store: {
      trigger: { event: "Change", target: "$current.amount" },
      description: "录入 本币价税合计",
      inTransaction: true,
      reference: "revenueConfirmationItems",
      condition: { access: "'amount'", if: "$current.amount.$focused" },
    },
  },
  {
    ruleId: "qtyValueTax-input-amount",
    actionIndex: 1,
    actionName: "Assignment",
    params: {
      expr: "$fn.getQtyValueTaxParams('AMOUNT', 'LOCAL_SEG_OFFSET', $current.calcBase, $current.calcBaseHigh, $variable.taxRate, $variable.transQty, $variable.originPrice, $variable.price, $variable.originPriceWithoutTax, $variable.priceWithoutTax, $current.originAmount, $current.amount, $variable.originAmountWithoutTax, $variable.amountWithoutTax, $variable.originTaxAmount, $variable.taxAmount)",
      field: "$variable.qtyValueTaxParams",
    },
    store: {
      trigger: { event: "Change", target: "$current.amount" },
      description: "录入 本币价税合计",
      inTransaction: true,
      reference: "revenueConfirmationItems",
      condition: { access: "'amount'", if: "$current.amount.$focused" },
    },
  },
  {
    ruleId: "qtyValueTax-input-amount",
    actionIndex: 2,
    actionName: "Assignment",
    params: { expr: "true", field: "isPriceWithTax", when: "'isPriceWithTax'" },
    store: {
      trigger: { event: "Change", target: "$current.amount" },
      description: "录入 本币价税合计",
      inTransaction: true,
      reference: "revenueConfirmationItems",
      condition: { access: "'amount'", if: "$current.amount.$focused" },
    },
  },
  {
    ruleId: "qtyValueTax-output-amount",
    actionIndex: 0,
    actionName: "ReactiveAssignment",
    params: {
      effects: [
        {
          autoClear: true,
          expr: "$variable.qtyValueTaxResult.amount",
          isWhenTracked: false,
          override: true,
          when: "$fn.needWriteBack($variable.qtyValueTaxCurrentField, $current.amount.$focused, $variable.qtyValueTaxParams.amount, $variable.qtyValueTaxResult.amount)",
        },
      ],
      field: "amount",
    },
    store: {
      description: "回写 本币价税合计",
      reference: "revenueConfirmationItems",
      condition: { access: "'amount'" },
    },
  },
  {
    ruleId: "qtyValueTax-input-originAmountWithoutTax",
    actionIndex: 0,
    actionName: "Assignment",
    params: {
      expr: "'originAmountWithoutTax'",
      field: "$variable.qtyValueTaxCurrentField",
    },
    store: {
      trigger: { event: "Change", target: "$current.originAmountWithoutTax" },
      description: "录入 原币无税金额",
      inTransaction: true,
      reference: "revenueConfirmationItems",
      condition: {
        access: "'originAmountWithoutTax'",
        if: "$current.originAmountWithoutTax.$focused",
      },
    },
  },
  {
    ruleId: "qtyValueTax-input-originAmountWithoutTax",
    actionIndex: 1,
    actionName: "Assignment",
    params: {
      expr: "$fn.getQtyValueTaxParams('AMOUNT_WITHOUT_TAX', 'ZERO', $current.calcBase, $current.calcBaseHigh, $variable.taxRate, $variable.transQty, $variable.originPrice, $variable.price, $variable.originPriceWithoutTax, $variable.priceWithoutTax, $current.originAmount, $current.amount, $variable.originAmountWithoutTax, $variable.amountWithoutTax, $variable.originTaxAmount, $variable.taxAmount)",
      field: "$variable.qtyValueTaxParams",
    },
    store: {
      trigger: { event: "Change", target: "$current.originAmountWithoutTax" },
      description: "录入 原币无税金额",
      inTransaction: true,
      reference: "revenueConfirmationItems",
      condition: {
        access: "'originAmountWithoutTax'",
        if: "$current.originAmountWithoutTax.$focused",
      },
    },
  },
  {
    ruleId: "qtyValueTax-input-originAmountWithoutTax",
    actionIndex: 2,
    actionName: "Assignment",
    params: {
      expr: "false",
      field: "isPriceWithTax",
      when: "'isPriceWithTax'",
    },
    store: {
      trigger: { event: "Change", target: "$current.originAmountWithoutTax" },
      description: "录入 原币无税金额",
      inTransaction: true,
      reference: "revenueConfirmationItems",
      condition: {
        access: "'originAmountWithoutTax'",
        if: "$current.originAmountWithoutTax.$focused",
      },
    },
  },
  {
    ruleId: "qtyValueTax-output-originAmountWithoutTax",
    actionIndex: 0,
    actionName: "ReactiveAssignment",
    params: {
      effects: [
        {
          autoClear: true,
          expr: "$variable.qtyValueTaxResult.originAmountWithoutTax",
          isWhenTracked: false,
          override: true,
          when: "$fn.needWriteBack($variable.qtyValueTaxCurrentField, $current.originAmountWithoutTax.$focused, $variable.qtyValueTaxParams.originAmountWithoutTax, $variable.qtyValueTaxResult.originAmountWithoutTax)",
        },
      ],
      field: "originAmountWithoutTax",
    },
    store: {
      description: "回写 原币无税金额",
      reference: "revenueConfirmationItems",
      condition: { access: "'originAmountWithoutTax'" },
    },
  },
  {
    ruleId: "qtyValueTax-input-amountWithoutTax",
    actionIndex: 0,
    actionName: "Assignment",
    params: {
      expr: "'amountWithoutTax'",
      field: "$variable.qtyValueTaxCurrentField",
    },
    store: {
      trigger: { event: "Change", target: "$current.amountWithoutTax" },
      description: "录入 本币无税金额",
      inTransaction: true,
      reference: "revenueConfirmationItems",
      condition: {
        access: "'amountWithoutTax'",
        if: "$current.amountWithoutTax.$focused",
      },
    },
  },
  {
    ruleId: "qtyValueTax-input-amountWithoutTax",
    actionIndex: 1,
    actionName: "Assignment",
    params: {
      expr: "$fn.getQtyValueTaxParams('AMOUNT_WITHOUT_TAX', 'LOCAL_SEG_OFFSET', $current.calcBase, $current.calcBaseHigh, $variable.taxRate, $variable.transQty, $variable.originPrice, $variable.price, $variable.originPriceWithoutTax, $variable.priceWithoutTax, $current.originAmount, $current.amount, $variable.originAmountWithoutTax, $variable.amountWithoutTax, $variable.originTaxAmount, $variable.taxAmount)",
      field: "$variable.qtyValueTaxParams",
    },
    store: {
      trigger: { event: "Change", target: "$current.amountWithoutTax" },
      description: "录入 本币无税金额",
      inTransaction: true,
      reference: "revenueConfirmationItems",
      condition: {
        access: "'amountWithoutTax'",
        if: "$current.amountWithoutTax.$focused",
      },
    },
  },
  {
    ruleId: "qtyValueTax-input-amountWithoutTax",
    actionIndex: 2,
    actionName: "Assignment",
    params: {
      expr: "false",
      field: "isPriceWithTax",
      when: "'isPriceWithTax'",
    },
    store: {
      trigger: { event: "Change", target: "$current.amountWithoutTax" },
      description: "录入 本币无税金额",
      inTransaction: true,
      reference: "revenueConfirmationItems",
      condition: {
        access: "'amountWithoutTax'",
        if: "$current.amountWithoutTax.$focused",
      },
    },
  },
  {
    ruleId: "qtyValueTax-output-amountWithoutTax",
    actionIndex: 0,
    actionName: "ReactiveAssignment",
    params: {
      effects: [
        {
          autoClear: true,
          expr: "$variable.qtyValueTaxResult.amountWithoutTax",
          isWhenTracked: false,
          override: true,
          when: "$fn.needWriteBack($variable.qtyValueTaxCurrentField, $current.amountWithoutTax.$focused, $variable.qtyValueTaxParams.amountWithoutTax, $variable.qtyValueTaxResult.amountWithoutTax)",
        },
      ],
      field: "amountWithoutTax",
    },
    store: {
      description: "回写 本币无税金额",
      reference: "revenueConfirmationItems",
      condition: { access: "'amountWithoutTax'" },
    },
  },
  {
    ruleId: "qtyValueTax-input-originTaxAmount",
    actionIndex: 0,
    actionName: "Assignment",
    params: {
      expr: "'originTaxAmount'",
      field: "$variable.qtyValueTaxCurrentField",
    },
    store: {
      trigger: { event: "Change", target: "$current.originTaxAmount" },
      description: "录入 原币税额",
      inTransaction: true,
      reference: "revenueConfirmationItems",
      condition: {
        access: "'originTaxAmount'",
        if: "$current.originTaxAmount.$focused",
      },
    },
  },
  {
    ruleId: "qtyValueTax-input-originTaxAmount",
    actionIndex: 1,
    actionName: "Assignment",
    params: {
      expr: "$fn.getQtyValueTaxParams('TAX', 'ZERO', $current.calcBase, $current.calcBaseHigh, $variable.taxRate, $variable.transQty, $variable.originPrice, $variable.price, $variable.originPriceWithoutTax, $variable.priceWithoutTax, $current.originAmount, $current.amount, $variable.originAmountWithoutTax, $variable.amountWithoutTax, $variable.originTaxAmount, $variable.taxAmount)",
      field: "$variable.qtyValueTaxParams",
    },
    store: {
      trigger: { event: "Change", target: "$current.originTaxAmount" },
      description: "录入 原币税额",
      inTransaction: true,
      reference: "revenueConfirmationItems",
      condition: {
        access: "'originTaxAmount'",
        if: "$current.originTaxAmount.$focused",
      },
    },
  },
  {
    ruleId: "qtyValueTax-output-originTaxAmount",
    actionIndex: 0,
    actionName: "ReactiveAssignment",
    params: {
      effects: [
        {
          autoClear: true,
          expr: "$variable.qtyValueTaxResult.originTaxAmount",
          isWhenTracked: false,
          override: true,
          when: "$fn.needWriteBack($variable.qtyValueTaxCurrentField, $current.originTaxAmount.$focused, $variable.qtyValueTaxParams.originTaxAmount, $variable.qtyValueTaxResult.originTaxAmount)",
        },
      ],
      field: "originTaxAmount",
    },
    store: {
      description: "回写 原币税额",
      reference: "revenueConfirmationItems",
      condition: { access: "'originTaxAmount'" },
    },
  },
  {
    ruleId: "qtyValueTax-input-taxAmount",
    actionIndex: 0,
    actionName: "Assignment",
    params: { expr: "'taxAmount'", field: "$variable.qtyValueTaxCurrentField" },
    store: {
      trigger: { event: "Change", target: "$current.taxAmount" },
      description: "录入 本币税额",
      inTransaction: true,
      reference: "revenueConfirmationItems",
      condition: { access: "'taxAmount'", if: "$current.taxAmount.$focused" },
    },
  },
  {
    ruleId: "qtyValueTax-input-taxAmount",
    actionIndex: 1,
    actionName: "Assignment",
    params: {
      expr: "$fn.getQtyValueTaxParams('TAX', 'LOCAL_SEG_OFFSET', $current.calcBase, $current.calcBaseHigh, $variable.taxRate, $variable.transQty, $variable.originPrice, $variable.price, $variable.originPriceWithoutTax, $variable.priceWithoutTax, $current.originAmount, $current.amount, $variable.originAmountWithoutTax, $variable.amountWithoutTax, $variable.originTaxAmount, $variable.taxAmount)",
      field: "$variable.qtyValueTaxParams",
    },
    store: {
      trigger: { event: "Change", target: "$current.taxAmount" },
      description: "录入 本币税额",
      inTransaction: true,
      reference: "revenueConfirmationItems",
      condition: { access: "'taxAmount'", if: "$current.taxAmount.$focused" },
    },
  },
  {
    ruleId: "qtyValueTax-output-taxAmount",
    actionIndex: 0,
    actionName: "ReactiveAssignment",
    params: {
      effects: [
        {
          autoClear: true,
          expr: "$variable.qtyValueTaxResult.taxAmount",
          isWhenTracked: false,
          override: true,
          when: "$fn.needWriteBack($variable.qtyValueTaxCurrentField, $current.taxAmount.$focused, $variable.qtyValueTaxParams.taxAmount, $variable.qtyValueTaxResult.taxAmount)",
        },
      ],
      field: "taxAmount",
    },
    store: {
      description: "回写 本币税额",
      reference: "revenueConfirmationItems",
      condition: { access: "'taxAmount'" },
    },
  },
  {
    ruleId: "qtyValueTax-in-calcBase",
    actionIndex: 0,
    actionName: "Assignment",
    params: {
      expr: "$current.calcBase",
      field: "$variable.qtyValueTaxTempCalcBase",
    },
    store: {
      description: "同步 计算标志位",
      reference: "revenueConfirmationItems",
      condition: { access: "'calcBase'" },
    },
  },
  {
    ruleId: "qtyValueTax-output-calcBase",
    actionIndex: 0,
    actionName: "ReactiveAssignment",
    params: {
      effects: [
        {
          autoClear: true,
          expr: "$variable.qtyValueTaxResult.calcBase",
          isWhenTracked: false,
          override: true,
          when: "!$fn.suppressCalcBase($variable.qtyValueTaxCurrentField, $current.calcBase.$focused)",
        },
      ],
      field: "calcBase",
    },
    store: {
      description: "回写 计算标志位",
      reference: "revenueConfirmationItems",
      condition: { access: "'calcBase'" },
    },
  },
  {
    ruleId: "qtyValueTax-init-data",
    actionIndex: 0,
    actionName: "Assignment",
    params: {
      expr: "$fn.upgradeCalcBase($variable.qtyValueTaxInitParams)",
      field: "calcBase",
      when: "$context.mode === 'Copy' && !$current.calcBase",
    },
    store: {
      description: "初始化计算参数",
      inTransaction: true,
      reference: "revenueConfirmationItems",
    },
  },
  {
    ruleId: "qtyValueTax-init-data",
    actionIndex: 1,
    actionName: "Assignment",
    params: {
      expr: "$variable.qtyValueTaxInitParams",
      field: "$variable.qtyValueTaxParams",
      when: "!$variable.qtyValueTaxParams",
    },
    store: {
      description: "初始化计算参数",
      inTransaction: true,
      reference: "revenueConfirmationItems",
    },
  },
  {
    ruleId: "qtyValueTax-init-data",
    actionIndex: 2,
    actionName: "Assignment",
    params: {
      expr: "$variable.qtyValueTaxParams",
      field: "$variable.qtyValueTaxResult",
      when: "$context.mode !== 'Copy' && !$variable.qtyValueTaxResult && !$variable.qtyValueTaxCurrentField",
    },
    store: {
      description: "初始化计算参数",
      inTransaction: true,
      reference: "revenueConfirmationItems",
    },
  },
  {
    ruleId: "qtyValueTax-execute-recalculate",
    actionIndex: 0,
    actionName: "Assignment",
    params: {
      expr: "'exchangeRate'",
      field: "$variable.qtyValueTaxCurrentField",
      when: "$context.mode === 'Copy'",
    },
    store: {
      description: "执行重算",
      reference: "revenueConfirmationItems",
      condition: { access: "$context.mode === 'Copy'" },
    },
  },
  {
    ruleId: "qtyValueTax-execute-calc",
    actionIndex: 0,
    actionName: "ReactiveAssignment",
    params: {
      effects: [
        {
          expr: "$fn.qtyValueTax($fn.currencyParamsResolver, $context.systemSettings, $variable.qtyValueTaxParams, $current.currency, $current.exchangeRate, $variable.qtyValueTaxCurrentField)",
          fireImmediately: "$context.mode === 'Copy'",
          override: true,
          when: "$fn.needCalc($variable.qtyValueTaxParams, $variable.qtyValueTaxCurrentField)",
        },
      ],
      field: "$variable.qtyValueTaxResult",
    },
    store: { description: "执行计算", reference: "revenueConfirmationItems" },
  },
  {
    ruleId: "Old-Carry-0c3e25ab-fc7c-4f5b-88c7-4591db2275b6",
    actionIndex: 0,
    actionName: "ReactiveAssignment",
    params: {
      field: "productStandardType",
      effect: {
        expr: "$current.product.productStandardType",
        override: true,
        autoClear: true,
        fireImmediately: false,
      },
    },
    store: { description: "", reference: "revenueConfirmationItems" },
  },
  {
    ruleId: "Old-ImmutableCriteria-e8bdf446-e0e2-47dc-bdc0-5feeaf3d4c8c",
    actionIndex: 0,
    actionName: "ReactiveCriteria",
    params: {
      field: "product",
      fragment: {
        criteriaStr: "productFeatures.productType.id in ('ProductType.sales')",
        fireImmediately: true,
      },
    },
    store: { description: "", reference: "revenueConfirmationItems" },
  },
  {
    ruleId:
      "Old-MasterToDetailsSync-defaultValue-a26b5067-0b68-491b-956e-25794860754f-revenueConfirmationItems",
    actionIndex: 0,
    actionName: "Assignment",
    params: { field: "isPriceWithTax", expr: "$root.isPriceWithTax" },
    store: { description: "", reference: "revenueConfirmationItems" },
  },
  {
    ruleId:
      "Old-MasterToDetailsSync-defaultValue-23c0ac54-6b04-439d-84f9-f64e9f2c3c5d-revenueConfirmationItems",
    actionIndex: 0,
    actionName: "Assignment",
    params: { field: "currency", expr: "$root.currency" },
    store: { description: "", reference: "revenueConfirmationItems" },
  },
  {
    ruleId:
      "Old-MasterToDetailsSync-defaultValue-5af642ca-f6c1-4f58-833e-c795863f9cec-revenueConfirmationItems",
    actionIndex: 0,
    actionName: "Assignment",
    params: { field: "exchangeRate", expr: "$root.exchangeRate" },
    store: { description: "", reference: "revenueConfirmationItems" },
  },
  {
    ruleId:
      "Old-MasterToDetailsSync-defaultValue-29c34044-a4bd-4737-a872-f86f9a6288f5-revenueConfirmationItems",
    actionIndex: 0,
    actionName: "Assignment",
    params: {
      field: "revenueConfirmationDataType",
      expr: "$root.revenueConfirmationDataType",
    },
    store: { description: "", reference: "revenueConfirmationItems" },
  },
  {
    ruleId: "Old-Validator-df273ab2-b9a4-4f57-84dd-c2c9245605a7",
    actionIndex: 0,
    actionName: "ReactiveFieldValidator",
    params: {
      field: "taxRate",
      effect: {
        name: "min",
        params: { includeEquals: true, message: "税率 不能小于0", min: 0 },
        isStruct: false,
        fireImmediately: true,
      },
    },
    store: { description: "", reference: "revenueConfirmationItems" },
  },
  {
    ruleId: "Old-Validator-6302f257-31eb-40b6-bb44-f292cc3d2f13",
    actionIndex: 0,
    actionName: "ReactiveFieldValidator",
    params: {
      field: "taxRate",
      effect: {
        name: "max",
        params: { includeEquals: false, max: 1, message: "税率 不能大于等于1" },
        isStruct: false,
        fireImmediately: true,
      },
    },
    store: { description: "", reference: "revenueConfirmationItems" },
  },
  {
    ruleId: "Criteria-ContextRoleRelationShip-4",
    actionIndex: 0,
    actionName: "ReactiveCriteria",
    params: {
      field: "projectOrg",
      fragment: {
        criteriaStr:
          "(m.id=:salesOrgId or exists (select 1 from PartyDelegateRelationship where relationshipTypeId in ('SalesProjectDelegateRelationship')and toPartyId=m.id and fromPartyId=:salesOrgId  and isDisabled=false))",
        bindVars: { salesOrgId: "$parent.salesOrg.id" },
        when: "(!!$current.project.id) && (!!$parent.salesOrg.id)",
        fireImmediately: true,
      },
    },
    store: { description: "", reference: "revenueConfirmationItems" },
  },
];
